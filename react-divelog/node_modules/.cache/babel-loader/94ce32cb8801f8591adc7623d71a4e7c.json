{"ast":null,"code":"var _jsxFileName = \"/home/huber/Pulpit/divelog/react-divelog/src/components/logbook/GoogleLogbookMap.js\";\nimport React from 'react';\nimport { Map, Marker, GoogleApiWrapper, InfoWindow } from 'google-maps-react';\nimport GoogleLogbookModal from '../logbook/GoogleLogbookModal';\nimport $ from 'jquery';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'redux';\nimport DeleteLogbookButton from '../logbook/DeleteLogbookButton';\nimport swal from 'sweetalert';\nimport GoogleLogbookMarkerModal from './GoogleLogbookMarkerModal';\n\nclass GoogleLogbookMap extends React.Component {\n  constructor() {\n    super();\n\n    this.onMarkerClick = (props, marker, e) => {\n      if (this.state.isAccessible) {\n        this.setState({\n          selectedPlace: props,\n          activeMarker: marker,\n          showingInfoWindow: true,\n          isAccessible: false,\n          existingMarkerName: props.name,\n          existingMarkerLatitude: props.position.lat,\n          existingMarkerLongitude: props.position.lng\n        });\n        $(document).on('show.bs.modal', \"#modalLogbookMarker\", function (event) {});\n        $(\"#modalLogbookMarker\").modal('show');\n      }\n    };\n\n    this.onClose = props => {\n      if (this.state.showingInfoWindow) {\n        this.setState({\n          showingInfoWindow: false,\n          activeMarker: null\n        });\n\n        if (this.tbodyRef.innerHTML !== \"\") {\n          this.tbodyRef.innerHTML = \"\";\n        }\n      }\n    };\n\n    this.onClose = props => {\n      if (this.state.showingInfoWindow) {\n        this.setState({\n          showingInfoWindow: false,\n          activeMarker: null\n        });\n      }\n    };\n\n    this.showTableRow = () => {\n      return React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"1\")), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, this.state.marker.name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, this.state.marker.latitude), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, this.state.marker.longitude), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(DeleteLogbookButton, {\n        id: this.state.marker.id,\n        updateMarker: this.updateMarker,\n        setFinishMarker: this.setFinishMarker,\n        setRef: this.setRef,\n        setIsAccessible: this.setIsAccessible,\n        setMarker: this.props.setMarker,\n        fetchMarkers: this.fetchMarkers,\n        setDeletedMarkerId: this.setDeletedMarkerId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      })));\n    };\n\n    this.state = {\n      latitude: '',\n      longitude: '',\n      marker: {},\n      activeMarker: {},\n      showingInfoWIndow: false,\n      selectedPlace: {},\n      isFinishMarker: false,\n      isAccessible: true,\n      existingMarkerName: '',\n      existingMarkerLatitude: '',\n      existingMarkerLongitude: '',\n      isUpdateLogbookRow: false,\n      deletedMarkerId: 0\n    };\n    this.markers = [];\n    this.onMapClick = this.onMapClick.bind(this);\n    this.updateMarker = this.updateMarker.bind(this);\n    this.setFinishMarker = this.setFinishMarker.bind(this);\n    this.setIsAccessible = this.setIsAccessible.bind(this);\n    this.showAllMarkers = this.showAllMarkers.bind(this);\n    this.onMarkerClick = this.onMarkerClick.bind(this);\n    this.setUpdateLogbookRow = this.setUpdateLogbookRow.bind(this);\n    this.fetchMarkers = this.fetchMarkers.bind(this);\n    this.setDeletedMarkerId = this.setDeletedMarkerId.bind(this);\n    this.addMarkerToList = this.addMarkerToList.bind(this);\n  }\n\n  componentDidMount() {\n    $(\".add-dive-google-container div:first\").css({\n      \"height\": \"350px\",\n      \"position\": \"static\"\n    });\n    let jwtToken = localStorage.getItem(\"JwtToken\");\n    fetch(\"/get/markers/\".concat(jwtToken), {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'content-type': 'application/json'\n      }\n    }).then(response => response.json()).then(jsonData => {\n      jsonData.map((marker, index) => {\n        let element = {\n          id: marker.id,\n          name: marker.name,\n          latitude: marker.latitude,\n          longitude: marker.longitude\n        };\n        this.markers.push(element);\n      });\n    });\n\n    if (this.props.updateMarker != null) {\n      const element = {\n        id: this.props.updateMarker.id,\n        name: this.props.updateMarker.name,\n        latitude: this.props.updateMarker.latitude,\n        longitude: this.props.updateMarker.longitude\n      };\n      this.markers.push(element);\n      this.setState({\n        marker: element\n      }, () => {\n        this.setState({\n          isUpdateLogbookRow: true\n        });\n      });\n    }\n  }\n\n  fetchMarkers() {\n    let jwtToken = localStorage.getItem(\"JwtToken\");\n    fetch(\"/get/markers/\".concat(jwtToken), {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'content-type': 'application/json'\n      }\n    }).then(response => response.json()).then(jsonData => {\n      jsonData.map((marker, index) => {\n        let element = {\n          id: marker.id,\n          name: marker.name,\n          latitude: marker.latitude,\n          longitude: marker.longitude\n        };\n        this.markers.push(element);\n      });\n    });\n  }\n\n  onMapClick(t, map, coord) {\n    if (this.state.isAccessible) {\n      const latLng = coord.latLng;\n      const lat = latLng.lat();\n      const lng = latLng.lng();\n      this.setState({\n        latitude: lat,\n        longitude: lng,\n        isAccessible: false\n      });\n      $(document).on('show.bs.modal', \"#modalLogbookCenter\", function (event) {\n        $('#name').trigger('focus');\n      });\n      $(\"#modalLogbookCenter\").modal('show');\n    } else {\n      swal(this.props.t(\"googleMap.modal.swalLocation.title\"), this.props.t(\"googleMap.modal.swalLocation.text\"), \"error\");\n    }\n  }\n\n  showMarker() {\n    return React.createElement(Marker, {\n      name: this.state.marker.name,\n      position: {\n        lat: this.state.marker.latitude,\n        lng: this.state.marker.longitude\n      },\n      onClick: this.onMarkerClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    });\n  }\n\n  showAllMarkers() {\n    return this.markers.map((marker, index) => {\n      return React.createElement(Marker, {\n        key: index,\n        name: marker.name,\n        position: {\n          lat: marker.latitude,\n          lng: marker.longitude\n        },\n        onClick: this.onMarkerClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      });\n    });\n  }\n\n  showMarkerRowFromUpdateLogbook(object) {\n    return React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      scope: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, \"1\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, object.name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, object.latitude), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, object.longitude), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(DeleteLogbookButton, {\n      id: object.id,\n      updateMarker: this.updateMarker,\n      setFinishMarker: this.setFinishMarker,\n      setIsAccessible: this.setIsAccessible,\n      setMarker: this.props.setMarker,\n      setUpdateLogbookRow: this.setUpdateLogbookRow,\n      isUpdating: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    })));\n  }\n\n  updateMarker(markerObject) {\n    this.setState({\n      marker: markerObject\n    });\n  }\n\n  setFinishMarker(value) {\n    this.setState({\n      isFinishMarker: value\n    });\n  }\n\n  setIsAccessible() {\n    this.setState({\n      isAccessible: true\n    });\n  }\n\n  setUpdateLogbookRow() {\n    this.setState({\n      isUpdateLogbookRow: false\n    });\n  }\n\n  setDeletedMarkerId(value) {\n    this.setState({\n      deletedMarkerId: value\n    }, () => {\n      let id = this.state.deletedMarkerId;\n      let index = 0;\n      this.markers.map((marker, index) => {\n        if (marker.id === id) {\n          this.markers.splice(index, 1);\n        }\n\n        index++;\n      });\n    });\n  }\n\n  addMarkerToList(newObject) {\n    this.markers.push(newObject);\n  }\n\n  render() {\n    let isFinishMarker = this.state.isFinishMarker;\n    let isUpdateLogbookRow = this.state.isUpdateLogbookRow;\n    let marker = this.state.marker;\n    let tableRow;\n\n    if (isFinishMarker) {\n      tableRow = this.showTableRow();\n    } else {\n      tableRow = \"\";\n    }\n\n    let updateTableRow;\n\n    if (isUpdateLogbookRow) {\n      updateTableRow = this.showMarkerRowFromUpdateLogbook(marker);\n    } else {\n      updateTableRow = \"\";\n    }\n\n    const mapStyle = {\n      position: 'static',\n      width: '100%',\n      height: '350px'\n    };\n    let loadingScreen = React.createElement(\"div\", {\n      class: \"d-flex justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"spinner-grow\",\n      role: \"status\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"sr-only\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, this.props.t(\"loading\"))));\n    let map = React.createElement(\"div\", {\n      className: \"add-dive-google-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, React.createElement(Map, {\n      google: this.props.google,\n      zoom: 5,\n      style: mapStyle,\n      initialCenter: {\n        lat: 48.023,\n        lng: 14.426\n      },\n      onClick: this.onMapClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }, isFinishMarker && this.showMarker(), this.showAllMarkers(), React.createElement(InfoWindow, {\n      marker: this.state.activeMarker,\n      visible: this.state.showingInfoWindow,\n      onClose: this.onClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"alert alert-success\",\n      role: \"alert\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, this.state.selectedPlace.name)))), React.createElement(GoogleLogbookModal, {\n      latitude: this.state.latitude,\n      longitude: this.state.longitude,\n      updateMarker: this.updateMarker,\n      setFinishMarker: this.setFinishMarker,\n      setMarker: this.props.setMarker,\n      setIsAccessible: this.setIsAccessible,\n      addMarkerToList: this.addMarkerToList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    }), React.createElement(GoogleLogbookMarkerModal, {\n      name: this.state.existingMarkerName,\n      latitude: this.state.existingMarkerLatitude,\n      longitude: this.state.existingMarkerLongitude,\n      updateMarker: this.updateMarker,\n      setFinishMarker: this.setFinishMarker,\n      setMarker: this.props.setMarker,\n      setIsAccessible: this.setIsAccessible,\n      addMarkerToList: this.addMarkerToList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"add-dive-table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-striped table-hover\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, \"#\")), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, this.props.t(\"googleMap.table.name\")), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }, this.props.t(\"googleMap.table.latitude\")), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    }, this.props.t(\"googleMap.table.longitude\")), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, this.props.t(\"googleMap.table.delete\")))), React.createElement(\"tbody\", {\n      ref: el => this.tbodyRef = el,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368\n      },\n      __self: this\n    }, isFinishMarker && !isUpdateLogbookRow && tableRow, isUpdateLogbookRow && updateTableRow))));\n    let content = this.state.isLoading ? loadingScreen : map;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }, content);\n  }\n\n}\n\nexport default compose(GoogleApiWrapper(props => ({\n  apiKey: 'AIzaSyBgb4kpatKEjsOGsxplxFyRfw1K_wGhLTo',\n  language: props.language\n})), withTranslation(\"common\"))(GoogleLogbookMap);","map":{"version":3,"sources":["/home/huber/Pulpit/divelog/react-divelog/src/components/logbook/GoogleLogbookMap.js"],"names":["React","Map","Marker","GoogleApiWrapper","InfoWindow","GoogleLogbookModal","$","withTranslation","compose","DeleteLogbookButton","swal","GoogleLogbookMarkerModal","GoogleLogbookMap","Component","constructor","onMarkerClick","props","marker","e","state","isAccessible","setState","selectedPlace","activeMarker","showingInfoWindow","existingMarkerName","name","existingMarkerLatitude","position","lat","existingMarkerLongitude","lng","document","on","event","modal","onClose","tbodyRef","innerHTML","showTableRow","latitude","longitude","id","updateMarker","setFinishMarker","setRef","setIsAccessible","setMarker","fetchMarkers","setDeletedMarkerId","showingInfoWIndow","isFinishMarker","isUpdateLogbookRow","deletedMarkerId","markers","onMapClick","bind","showAllMarkers","setUpdateLogbookRow","addMarkerToList","componentDidMount","css","jwtToken","localStorage","getItem","fetch","method","headers","then","response","json","jsonData","map","index","element","push","t","coord","latLng","trigger","showMarker","showMarkerRowFromUpdateLogbook","object","markerObject","value","splice","newObject","render","tableRow","updateTableRow","mapStyle","width","height","loadingScreen","google","el","content","isLoading","apiKey","language"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Map, Marker, GoogleApiWrapper, InfoWindow } from 'google-maps-react';\nimport GoogleLogbookModal from '../logbook/GoogleLogbookModal';\nimport $ from 'jquery';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'redux';\nimport DeleteLogbookButton from '../logbook/DeleteLogbookButton';\nimport swal from 'sweetalert';\nimport GoogleLogbookMarkerModal from './GoogleLogbookMarkerModal';\n\nclass GoogleLogbookMap extends React.Component {\n    constructor() {\n        super();\n\n        this.state = {\n            latitude: '',\n            longitude: '',\n            marker: {},\n            activeMarker: {},\n            showingInfoWIndow: false,\n            selectedPlace: {},\n            isFinishMarker: false,\n            isAccessible: true,\n            existingMarkerName: '',\n            existingMarkerLatitude: '',\n            existingMarkerLongitude: '',\n            isUpdateLogbookRow: false,\n            deletedMarkerId: 0\n        }\n        this.markers = [];\n\n        this.onMapClick = this.onMapClick.bind(this);\n        this.updateMarker = this.updateMarker.bind(this);\n        this.setFinishMarker = this.setFinishMarker.bind(this);\n        this.setIsAccessible = this.setIsAccessible.bind(this);\n        this.showAllMarkers = this.showAllMarkers.bind(this);\n        this.onMarkerClick = this.onMarkerClick.bind(this);\n        this.setUpdateLogbookRow = this.setUpdateLogbookRow.bind(this);\n        this.fetchMarkers = this.fetchMarkers.bind(this);\n        this.setDeletedMarkerId = this.setDeletedMarkerId.bind(this);\n        this.addMarkerToList = this.addMarkerToList.bind(this);\n    }\n\n    componentDidMount() {\n        $(\".add-dive-google-container div:first\").css({\n            \"height\": \"350px\",\n            \"position\": \"static\"\n        });\n\n        let jwtToken = localStorage.getItem(\"JwtToken\");\n\n        fetch(`/get/markers/${jwtToken}`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'content-type': 'application/json'\n            }\n        })\n        .then(response => response.json())\n        .then(jsonData => {\n            jsonData.map((marker, index) => {\n                let element = {\n                    id: marker.id,\n                    name: marker.name,\n                    latitude: marker.latitude,\n                    longitude: marker.longitude\n                }\n                this.markers.push(element);\n            })\n        }); \n\n        if(this.props.updateMarker != null) {\n            const element = {\n                id: this.props.updateMarker.id,\n                name: this.props.updateMarker.name,\n                latitude: this.props.updateMarker.latitude,\n                longitude: this.props.updateMarker.longitude\n            }\n            this.markers.push(element);\n            this.setState({ marker: element}, () => {\n                this.setState({ isUpdateLogbookRow: true });\n            });\n        }\n    }\n\n    fetchMarkers() {\n        let jwtToken = localStorage.getItem(\"JwtToken\");\n\n        fetch(`/get/markers/${jwtToken}`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'content-type': 'application/json'\n            }\n        })\n        .then(response => response.json())\n        .then(jsonData => {\n            jsonData.map((marker, index) => {\n                let element = {\n                    id: marker.id,\n                    name: marker.name,\n                    latitude: marker.latitude,\n                    longitude: marker.longitude\n                }\n                this.markers.push(element);\n            });\n        }); \n    }\n\n    onMapClick(t, map, coord) {\n        if(this.state.isAccessible) {\n            const { latLng } = coord;\n            const lat = latLng.lat();\n            const lng = latLng.lng();\n\n            this.setState({ \n                latitude: lat,\n                longitude: lng,\n                isAccessible: false\n            });\n\n            $(document).on('show.bs.modal', \"#modalLogbookCenter\", function (event) {\n                $('#name').trigger('focus');\n            });\n            $(\"#modalLogbookCenter\").modal('show');\n        } else {\n            swal(this.props.t(\"googleMap.modal.swalLocation.title\"), this.props.t(\"googleMap.modal.swalLocation.text\"), \"error\");\n        }\n    }\n\n    onMarkerClick = (props, marker, e) => {\n        if(this.state.isAccessible) {\n            this.setState({\n                selectedPlace: props,\n                activeMarker: marker,\n                showingInfoWindow: true,\n                isAccessible: false,\n                existingMarkerName: props.name,\n                existingMarkerLatitude: props.position.lat,\n                existingMarkerLongitude: props.position.lng\n            });\n            $(document).on('show.bs.modal', \"#modalLogbookMarker\", function (event) {});\n            $(\"#modalLogbookMarker\").modal('show');\n        }\n    }\n\n    onClose = props => {\n        if(this.state.showingInfoWindow) {\n            this.setState({\n                showingInfoWindow: false,\n                activeMarker: null\n            });if(this.tbodyRef.innerHTML !== \"\") {\n                this.tbodyRef.innerHTML = \"\";\n            }\n        }\n    };\n\n    showMarker() {\n        return (\n            <Marker \n                name={this.state.marker.name}\n                position={{ lat: this.state.marker.latitude, lng: this.state.marker.longitude }}\n                onClick={this.onMarkerClick}\n            />\n        );\n    }\n\n    showAllMarkers() {\n        return this.markers.map((marker, index) => {\n            return (\n                <Marker \n                    key={index} \n                    name={marker.name}\n                    position={{ lat: marker.latitude, lng: marker.longitude }}\n                    onClick={this.onMarkerClick}\n                />\n            );\n        });\n    }\n\n    onClose = props => {\n        if(this.state.showingInfoWindow) {\n            this.setState({\n                showingInfoWindow: false,\n                activeMarker: null\n            });\n        }\n    };\n\n    showTableRow = () => {\n        return (\n            <tr>\n                <th scope=\"row\">\n                    <b>1</b>\n                </th>\n                <td>{this.state.marker.name}</td>\n                <td>{this.state.marker.latitude}</td>\n                <td>{this.state.marker.longitude}</td>\n                <td>\n                    <DeleteLogbookButton \n                        id={this.state.marker.id}\n                        updateMarker={this.updateMarker}\n                        setFinishMarker={this.setFinishMarker}\n                        setRef={this.setRef}\n                        setIsAccessible={this.setIsAccessible}\n                        setMarker={this.props.setMarker}\n                        fetchMarkers={this.fetchMarkers}\n                        setDeletedMarkerId={this.setDeletedMarkerId}\n                    />\n                </td>\n            </tr>\n        );\n    }\n\n    showMarkerRowFromUpdateLogbook(object) {\n        return (\n            <tr>\n                <th scope=\"row\">\n                    <b>1</b>\n                </th>\n                <td>{object.name}</td>\n                <td>{object.latitude}</td>\n                <td>{object.longitude}</td>\n                <td>\n                    <DeleteLogbookButton \n                        id={object.id}\n                        updateMarker={this.updateMarker}\n                        setFinishMarker={this.setFinishMarker}\n                        setIsAccessible={this.setIsAccessible}\n                        setMarker={this.props.setMarker}\n                        setUpdateLogbookRow={this.setUpdateLogbookRow}\n                        isUpdating={true}\n                    />\n                </td>\n            </tr>\n        );\n    }\n\n    updateMarker(markerObject) {\n        this.setState({ marker: markerObject });\n    }\n\n    setFinishMarker(value) {\n        this.setState({ isFinishMarker: value });\n    }\n\n    setIsAccessible() {\n        this.setState({ isAccessible: true });\n    }\n\n    setUpdateLogbookRow() {\n        this.setState({ isUpdateLogbookRow: false });\n    }\n\n    setDeletedMarkerId(value) {\n        this.setState({ deletedMarkerId: value }, () => {\n            let id = this.state.deletedMarkerId;\n            let index = 0;\n            this.markers.map((marker, index) => {\n                if(marker.id === id) {\n                    this.markers.splice(index, 1);\n                }\n                index++;\n            });\n        });\n    }\n\n    addMarkerToList(newObject) {\n        this.markers.push(newObject);\n    }\n\n    render() {\n        let isFinishMarker = this.state.isFinishMarker;\n        let isUpdateLogbookRow = this.state.isUpdateLogbookRow;\n        let marker = this.state.marker;\n\n        let tableRow;\n        if(isFinishMarker) {\n            tableRow = this.showTableRow();\n        } else {\n            tableRow = \"\";\n        }\n\n        let updateTableRow;\n        if(isUpdateLogbookRow) {\n            updateTableRow = this.showMarkerRowFromUpdateLogbook(marker);\n        } else {\n            updateTableRow = \"\";\n        }\n         \n        const mapStyle = {\n            position: 'static',\n            width: '100%',\n            height: '350px',\n        }\n\n        let loadingScreen = (\n            <div class=\"d-flex justify-content-center\">\n                <div class=\"spinner-grow\" role=\"status\">\n                    <span class=\"sr-only\">\n                        {this.props.t(\"loading\")}\n                    </span>\n                </div>\n            </div>\n        )\n\n        let map = (\n            <div className=\"add-dive-google-container\">\n                <Map\n                    google={this.props.google}\n                    zoom={5}\n                    style={mapStyle}\n                    initialCenter={{ lat: 48.023, lng: 14.426}}\n                    onClick={this.onMapClick}\n                >\n                    { isFinishMarker && this.showMarker() }\n                    { this.showAllMarkers() }\n                    <InfoWindow\n                        marker={this.state.activeMarker}\n                        visible={this.state.showingInfoWindow}\n                        onClose={this.onClose}\n                    >\n                        <div className=\"alert alert-success\" role=\"alert\">\n                            <h4>{this.state.selectedPlace.name}</h4>\n                        </div>\n                    </InfoWindow>\n                </Map>\n                <GoogleLogbookModal \n                    latitude={this.state.latitude}\n                    longitude={this.state.longitude}\n                    updateMarker={this.updateMarker}\n                    setFinishMarker={this.setFinishMarker}\n                    setMarker={this.props.setMarker}\n                    setIsAccessible={this.setIsAccessible}\n                    addMarkerToList={this.addMarkerToList}\n                />\n                <GoogleLogbookMarkerModal \n                    name={this.state.existingMarkerName}\n                    latitude={this.state.existingMarkerLatitude}\n                    longitude={this.state.existingMarkerLongitude}\n                    updateMarker={this.updateMarker}\n                    setFinishMarker={this.setFinishMarker}\n                    setMarker={this.props.setMarker}\n                    setIsAccessible={this.setIsAccessible}\n                    addMarkerToList={this.addMarkerToList}\n                />\n                <div className=\"add-dive-table\">\n                    <table className=\"table table-striped table-hover\">\n                        <thead>\n                            <tr>\n                                <th scope=\"col\">\n                                    <b>#</b>\n                                </th>\n                                <th scope=\"col\">\n                                    {this.props.t(\"googleMap.table.name\")}\n                                </th>\n                                <th scope=\"col\">\n                                    {this.props.t(\"googleMap.table.latitude\")}\n                                </th>\n                                <th scope=\"col\">\n                                    {this.props.t(\"googleMap.table.longitude\")}\n                                </th>\n                                <th scope=\"col\">\n                                    {this.props.t(\"googleMap.table.delete\")}\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody ref={(el) => this.tbodyRef = el}>\n                            { isFinishMarker && !isUpdateLogbookRow && tableRow }\n                            { isUpdateLogbookRow && updateTableRow }\n                        </tbody>\n                    </table>\n                </div>\n            </div>     \n        )\n        let content = this.state.isLoading ? loadingScreen : map;\n\n        return (\n            <div>\n                { content }\n            </div>\n        );\n    }\n}\n\nexport default compose(\n    GoogleApiWrapper(\n    (props) => ({\n      apiKey: 'AIzaSyBgb4kpatKEjsOGsxplxFyRfw1K_wGhLTo',\n      language: props.language,\n    }\n  )),\n    withTranslation(\"common\")\n  )(GoogleLogbookMap);"]},"metadata":{},"sourceType":"module"}