{"ast":null,"code":"var _jsxFileName = \"/home/huber/Pulpit/divelog/react-divelog/src/util/withAuth.js\";\nimport React from 'react';\nimport AuthService from './AuthService';\nimport TwitterExplore from '../components/twitter/TwitterExplore';\nexport default function withAuth(AuthComponent, props) {\n  const Auth = new AuthService();\n  let customAuthComponent = false;\n  console.log(props);\n\n  class AuthWrapped extends React.Component {\n    constructor(props) {\n      super(props);\n    }\n\n    componentDidMount() {\n      customAuthComponent = true;\n\n      if (!Auth.loggedIn()) {\n        this.props.history.replace(\"/login\");\n      } else {\n        let twitterJwtToken = Auth.getTwitterToken();\n        let facebookJwtToken = Auth.getToken();\n\n        try {\n          if (twitterJwtToken) {\n            console.log(this.props.twitterExplore);\n\n            if (this.props.twitterExplore) {\n              customAuthComponent && this.props.history.replace(\"/twitter/explore\");\n            } else {\n              customAuthComponent && this.props.history.replace(\"/twitter\");\n            }\n          }\n\n          if (facebookJwtToken) {\n            customAuthComponent && this.props.history.replace(\"/dashboard\");\n          }\n        } catch (err) {\n          if (twitterJwtToken) {\n            Auth.logoutTwitter();\n          }\n\n          if (facebookJwtToken) {\n            Auth.logout();\n          }\n\n          this.props.history.replace(\"/login\");\n        }\n      }\n    }\n\n    componentWillUnmount() {\n      customAuthComponent = false;\n    }\n\n    render() {\n      if (Auth.loggedIn()) {\n        return customAuthComponent && React.createElement(AuthComponent, {\n          history: this.props.history,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        });\n      } else {\n        return null;\n      }\n    }\n\n  }\n\n  return AuthWrapped;\n}","map":{"version":3,"sources":["/home/huber/Pulpit/divelog/react-divelog/src/util/withAuth.js"],"names":["React","AuthService","TwitterExplore","withAuth","AuthComponent","props","Auth","customAuthComponent","console","log","AuthWrapped","Component","constructor","componentDidMount","loggedIn","history","replace","twitterJwtToken","getTwitterToken","facebookJwtToken","getToken","twitterExplore","err","logoutTwitter","logout","componentWillUnmount","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,cAAP,MAA2B,sCAA3B;AAEA,eAAe,SAASC,QAAT,CAAkBC,aAAlB,EAAiCC,KAAjC,EAAwC;AACnD,QAAMC,IAAI,GAAI,IAAIL,WAAJ,EAAd;AACA,MAAIM,mBAAmB,GAAG,KAA1B;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ;;AAEA,QAAMK,WAAN,SAA0BV,KAAK,CAACW,SAAhC,CAA0C;AACtCC,IAAAA,WAAW,CAACP,KAAD,EAAQ;AACf,YAAMA,KAAN;AAEH;;AACDQ,IAAAA,iBAAiB,GAAG;AAChBN,MAAAA,mBAAmB,GAAG,IAAtB;;AAEA,UAAG,CAACD,IAAI,CAACQ,QAAL,EAAJ,EAAqB;AACjB,aAAKT,KAAL,CAAWU,OAAX,CAAmBC,OAAnB,CAA2B,QAA3B;AACH,OAFD,MAEO;AACH,YAAIC,eAAe,GAAGX,IAAI,CAACY,eAAL,EAAtB;AACA,YAAIC,gBAAgB,GAAGb,IAAI,CAACc,QAAL,EAAvB;;AACA,YAAI;AACA,cAAGH,eAAH,EAAoB;AAChBT,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAKJ,KAAL,CAAWgB,cAAvB;;AACA,gBAAG,KAAKhB,KAAL,CAAWgB,cAAd,EAA8B;AAC1Bd,cAAAA,mBAAmB,IAAI,KAAKF,KAAL,CAAWU,OAAX,CAAmBC,OAAnB,CAA2B,kBAA3B,CAAvB;AACH,aAFD,MAEO;AACHT,cAAAA,mBAAmB,IAAI,KAAKF,KAAL,CAAWU,OAAX,CAAmBC,OAAnB,CAA2B,UAA3B,CAAvB;AACH;AACJ;;AACD,cAAGG,gBAAH,EAAqB;AACjBZ,YAAAA,mBAAmB,IAAI,KAAKF,KAAL,CAAWU,OAAX,CAAmBC,OAAnB,CAA2B,YAA3B,CAAvB;AACH;AACJ,SAZD,CAYE,OAAMM,GAAN,EAAW;AACT,cAAGL,eAAH,EAAoB;AAChBX,YAAAA,IAAI,CAACiB,aAAL;AACH;;AACD,cAAGJ,gBAAH,EAAqB;AACjBb,YAAAA,IAAI,CAACkB,MAAL;AACH;;AACD,eAAKnB,KAAL,CAAWU,OAAX,CAAmBC,OAAnB,CAA2B,QAA3B;AACH;AACJ;AACJ;;AAEDS,IAAAA,oBAAoB,GAAG;AACnBlB,MAAAA,mBAAmB,GAAG,KAAtB;AACH;;AAEDmB,IAAAA,MAAM,GAAG;AACL,UAAGpB,IAAI,CAACQ,QAAL,EAAH,EAAoB;AAChB,eACIP,mBAAmB,IAAI,oBAAC,aAAD;AAAe,UAAA,OAAO,EAAE,KAAKF,KAAL,CAAWU,OAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAD3B;AAGH,OAJD,MAIO;AACH,eAAO,IAAP;AACH;AACJ;;AAjDqC;;AAmD1C,SAAOL,WAAP;AACH","sourcesContent":["import React from 'react';\nimport AuthService from './AuthService';\nimport TwitterExplore from '../components/twitter/TwitterExplore';\n\nexport default function withAuth(AuthComponent, props) {\n    const Auth =  new AuthService();\n    let customAuthComponent = false;\n\n    console.log(props);\n\n    class AuthWrapped extends React.Component {\n        constructor(props) {\n            super(props);\n\n        }\n        componentDidMount() {\n            customAuthComponent = true;\n\n            if(!Auth.loggedIn()) {\n                this.props.history.replace(\"/login\");\n            } else {\n                let twitterJwtToken = Auth.getTwitterToken();\n                let facebookJwtToken = Auth.getToken();\n                try {\n                    if(twitterJwtToken) {\n                        console.log(this.props.twitterExplore);\n                        if(this.props.twitterExplore) {\n                            customAuthComponent && this.props.history.replace(\"/twitter/explore\");\n                        } else {\n                            customAuthComponent && this.props.history.replace(\"/twitter\");\n                        }\n                    }\n                    if(facebookJwtToken) {\n                        customAuthComponent && this.props.history.replace(\"/dashboard\");\n                    }\n                } catch(err) {\n                    if(twitterJwtToken) {\n                        Auth.logoutTwitter();\n                    }\n                    if(facebookJwtToken) {\n                        Auth.logout();\n                    }\n                    this.props.history.replace(\"/login\");\n                }\n            }\n        }\n\n        componentWillUnmount() {\n            customAuthComponent = false;\n        }\n\n        render() {\n            if(Auth.loggedIn()) {\n                return (\n                    customAuthComponent && <AuthComponent history={this.props.history} />\n                );\n            } else {\n                return null;\n            }\n        }\n    }\n    return AuthWrapped;\n}"]},"metadata":{},"sourceType":"module"}