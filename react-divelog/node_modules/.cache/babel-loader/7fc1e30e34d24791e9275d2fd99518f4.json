{"ast":null,"code":"var _jsxFileName = \"/home/huber/Pulpit/divelog/react-divelog/src/components/forum/TopicWithPosts.js\";\nimport React from 'react';\nimport '../../css/TopicWithPosts.css';\nimport ConvertTime from '../../util/ConvertTime';\n\nclass TopicWithPosts extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mainPost: {},\n      isRetrieved: false\n    };\n    this.files = [];\n    this.ConvertTime = new ConvertTime();\n    this.addImages = this.addImages.bind(this);\n  }\n\n  componentDidMount() {\n    let id = this.props.match.params.id;\n    fetch(\"/get/topic/posts/\".concat(id), {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'content-type': 'application/json'\n      }\n    }).then(response => response.json()).then(jsonData => {\n      this.files = [];\n      jsonData.files.map((file, index) => {\n        const element = {\n          id: file.id,\n          objectId: file.objectId,\n          url: file.url,\n          size: file.size,\n          name: file.name,\n          type: file.type\n        };\n        this.files.push(element);\n      });\n      const element = {\n        title: jsonData.title,\n        message: jsonData.message,\n        createdAt: this.ConvertTime.convertTime(jsonData.createdAt, null, false)[0],\n        owner: jsonData.user.name,\n        pictureUrl: jsonData.user.pictureUrl,\n        files: this.files\n      };\n      this.setState({\n        mainPost: element,\n        isRetrieved: true\n      });\n      console.log(this.state.mainPost);\n    });\n  }\n\n  addImages() {\n    return this.state.mainPost.files.map((file, index) => {\n      if (file.type.includes('image')) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }), React.createElement(\"img\", {\n          src: file.url,\n          alt: file.name,\n          className: \"attachment-images\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }));\n      }\n    });\n  }\n\n  render() {\n    let isRetrieved = this.state.isRetrieved;\n    return React.createElement(\"div\", {\n      className: \"topic-posts-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main-post-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main-post-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main-post-grid-one\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main-post-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, this.state.mainPost.createdAt), React.createElement(\"div\", {\n      className: \"main-post-avatar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: this.state.mainPost.pictureUrl,\n      alt: \"Avatar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"main-post-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, this.state.mainPost.owner)), React.createElement(\"div\", {\n      className: \"main-post-grid-two\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main-post-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, this.state.mainPost.title), React.createElement(\"div\", {\n      className: \"main-post-message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, this.state.mainPost.message), React.createElement(\"div\", {\n      className: \"main-post-attachments\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, isRetrieved && this.addImages())))), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default TopicWithPosts;","map":{"version":3,"sources":["/home/huber/Pulpit/divelog/react-divelog/src/components/forum/TopicWithPosts.js"],"names":["React","ConvertTime","TopicWithPosts","Component","constructor","props","state","mainPost","isRetrieved","files","addImages","bind","componentDidMount","id","match","params","fetch","method","headers","then","response","json","jsonData","map","file","index","element","objectId","url","size","name","type","push","title","message","createdAt","convertTime","owner","user","pictureUrl","setState","console","log","includes","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../../css/TopicWithPosts.css';\nimport ConvertTime from '../../util/ConvertTime';\n\nclass TopicWithPosts extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            mainPost: {},\n            isRetrieved: false\n        }\n\n        this.files = []\n        this.ConvertTime = new ConvertTime();\n\n        this.addImages = this.addImages.bind(this);\n    }\n\n    componentDidMount() {\n        let id = this.props.match.params.id;\n\n        fetch(`/get/topic/posts/${id}`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'content-type': 'application/json'\n            }\n        }).then(response => response.json())\n        .then(jsonData => {\n            this.files = [];\n\n            jsonData.files.map((file, index) => {\n                const element = {\n                    id: file.id,\n                    objectId: file.objectId,\n                    url: file.url,\n                    size: file.size,\n                    name: file.name,\n                    type: file.type\n                }\n                this.files.push(element);\n            });\n\n            const element = {\n                title: jsonData.title,\n                message: jsonData.message,\n                createdAt: this.ConvertTime.convertTime(jsonData.createdAt, null, false)[0],\n                owner: jsonData.user.name,\n                pictureUrl: jsonData.user.pictureUrl,\n                files: this.files\n            }\n            this.setState({ \n                mainPost: element, \n                isRetrieved: true\n            });\n            console.log(this.state.mainPost);\n        });\n    }\n\n    addImages() {\n        return this.state.mainPost.files.map((file, index) => {\n            if(file.type.includes('image')) {\n                return (\n                    <div>\n                        <br />\n                        <img \n                            src={file.url} \n                            alt={file.name} \n                            className=\"attachment-images\"\n                        />\n                        <br />\n                        <br />\n                    </div>\n                );\n            }\n        });\n    }\n\n    render() {\n        let isRetrieved = this.state.isRetrieved;\n\n        return (\n            <div className=\"topic-posts-container\">\n                <div className=\"main-post-center\">\n                    <div className=\"main-post-container\">\n                        <div className=\"main-post-grid-one\">\n                            <div className=\"main-post-header\">\n                                { this.state.mainPost.createdAt }\n                            </div>\n                            <div className=\"main-post-avatar\">\n                                <img src={this.state.mainPost.pictureUrl} alt=\"Avatar\" />\n                            </div>\n                            <div className=\"main-post-footer\">\n                                { this.state.mainPost.owner }\n                            </div>\n                        </div>\n                        <div className=\"main-post-grid-two\">\n                            <div className=\"main-post-title\">\n                                { this.state.mainPost.title }\n                            </div>\n                            <div className=\"main-post-message\">\n                                { this.state.mainPost.message }\n                            </div>\n                            <div className=\"main-post-attachments\">\n                                { isRetrieved && this.addImages() }\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <hr />\n            </div>\n        );\n    }\n}\n\nexport default TopicWithPosts;"]},"metadata":{},"sourceType":"module"}