{"ast":null,"code":"var _jsxFileName = \"/home/huber/Pulpit/divelog/react-divelog/src/util/withAuth.js\";\nimport React from 'react';\nimport AuthService from './AuthService';\nexport default function withAuth(AuthComponent) {\n  const Auth = new AuthService();\n  return class AuthWrapped extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        user: null\n      };\n    }\n\n    componentWillMount() {\n      if (!Auth.loggedIn()) {\n        this.props.history.replace(\"/login\");\n      } else {\n        try {\n          this.props.history.replace(\"/dashboard\");\n        } catch (err) {\n          Auth.logout();\n          this.props.history.replace(\"/login\");\n        }\n      }\n    }\n\n    render() {\n      if (this.state.user) {\n        return React.createElement(AuthComponent, {\n          history: this.props.history,\n          user: this.state.user,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32\n          },\n          __self: this\n        });\n      } else {\n        return null;\n      }\n    }\n\n  };\n}","map":{"version":3,"sources":["/home/huber/Pulpit/divelog/react-divelog/src/util/withAuth.js"],"names":["React","AuthService","withAuth","AuthComponent","Auth","AuthWrapped","Component","constructor","props","state","user","componentWillMount","loggedIn","history","replace","err","logout","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AAEA,eAAe,SAASC,QAAT,CAAkBC,aAAlB,EAAiC;AAC5C,QAAMC,IAAI,GAAI,IAAIH,WAAJ,EAAd;AAEA,SAAO,MAAMI,WAAN,SAA0BL,KAAK,CAACM,SAAhC,CAA0C;AAC7CC,IAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,YAAMA,KAAN;AAEA,WAAKC,KAAL,GAAa;AACTC,QAAAA,IAAI,EAAE;AADG,OAAb;AAGH;;AAEDC,IAAAA,kBAAkB,GAAG;AACjB,UAAG,CAACP,IAAI,CAACQ,QAAL,EAAJ,EAAqB;AACjB,aAAKJ,KAAL,CAAWK,OAAX,CAAmBC,OAAnB,CAA2B,QAA3B;AACH,OAFD,MAEO;AACH,YAAI;AACA,eAAKN,KAAL,CAAWK,OAAX,CAAmBC,OAAnB,CAA2B,YAA3B;AACH,SAFD,CAEE,OAAMC,GAAN,EAAW;AACTX,UAAAA,IAAI,CAACY,MAAL;AACA,eAAKR,KAAL,CAAWK,OAAX,CAAmBC,OAAnB,CAA2B,QAA3B;AACH;AACJ;AACJ;;AAEDG,IAAAA,MAAM,GAAG;AACL,UAAG,KAAKR,KAAL,CAAWC,IAAd,EAAoB;AAChB,eACI,oBAAC,aAAD;AAAe,UAAA,OAAO,EAAE,KAAKF,KAAL,CAAWK,OAAnC;AAA4C,UAAA,IAAI,EAAE,KAAKJ,KAAL,CAAWC,IAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAGH,OAJD,MAIO;AACH,eAAO,IAAP;AACH;AACJ;;AA9B4C,GAAjD;AAgCH","sourcesContent":["import React from 'react';\nimport AuthService from './AuthService';\n\nexport default function withAuth(AuthComponent) {\n    const Auth =  new AuthService();\n\n    return class AuthWrapped extends React.Component {\n        constructor(props) {\n            super(props);\n\n            this.state = {\n                user: null\n            }\n        }\n\n        componentWillMount() {\n            if(!Auth.loggedIn()) {\n                this.props.history.replace(\"/login\")\n            } else {\n                try {\n                    this.props.history.replace(\"/dashboard\");\n                } catch(err) {\n                    Auth.logout();\n                    this.props.history.replace(\"/login\");\n                }\n            }\n        }\n\n        render() {\n            if(this.state.user) {\n                return (\n                    <AuthComponent history={this.props.history} user={this.state.user} />\n                );\n            } else {\n                return null;\n            }\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}