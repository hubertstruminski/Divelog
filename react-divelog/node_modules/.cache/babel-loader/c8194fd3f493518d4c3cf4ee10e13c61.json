{"ast":null,"code":"var _jsxFileName = \"/home/huber/Pulpit/divelog/react-divelog/src/components/logbook/PDFTableButton.js\";\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport jsPDF from 'jspdf';\nimport divelogLogo from '../../img/logo.png';\nimport ConvertTime from '../../util/ConvertTime';\nimport $ from 'jquery';\nimport '../../css/PdfLogbook.css';\n\nclass PDFTableButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.specialElementHandlers = {\n      '#hubert': function (element, renderer) {\n        return true;\n      },\n      '.controls': function (element, renderer) {\n        return true;\n      }\n    };\n    this.state = {\n      partnerName: '',\n      partnerSurname: '',\n      marker: {},\n      entryTime: '',\n      exitTime: '',\n      averageDepth: 0.0,\n      maxDepth: 0.0,\n      visibility: 0.0,\n      waterTemperature: 0.0,\n      airTemperature: 0.0,\n      cylinderCapacity: '',\n      divingSuit: 'NONE',\n      waterType: 'NONE',\n      waterEntryType: 'NONE',\n      ballast: 0.0,\n      glovesType: 'NONE',\n      divingType: 'NONE',\n      comment: ''\n    };\n    this.ConvertTime = new ConvertTime();\n    this.onClick = this.onClick.bind(this);\n  }\n\n  renderDataForHTML() {\n    return React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, \"Hubert Struminski\");\n  }\n\n  onClick(e) {\n    e.preventDefault();\n    const id = this.props.id;\n    let jwtToken = localStorage.getItem(\"JwtToken\");\n    fetch(\"/pdf/logbook/\".concat(id, \"/\").concat(jwtToken), {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'content-type': 'application/json'\n      }\n    }).then(response => response.json()).then(jsonData => {\n      let time = this.ConvertTime.convertTime(jsonData.entryTime, jsonData.exitTime, true);\n      const markerElement = {\n        id: jsonData.marker.id,\n        name: jsonData.marker.name,\n        latitude: jsonData.marker.latitude,\n        longitude: jsonData.marker.longitude\n      };\n      this.setState({\n        partnerName: jsonData.partnerName,\n        partnerSurname: jsonData.partnerSurname,\n        marker: markerElement,\n        entryTime: time[0],\n        exitTime: time[1],\n        averageDepth: jsonData.averageDepth,\n        maxDepth: jsonData.maxDepth,\n        visibility: jsonData.visibility,\n        waterTemperature: jsonData.waterTemperature,\n        airTemperature: jsonData.airTemperature,\n        cylinderCapacity: jsonData.cylinderCapacity,\n        divingSuit: jsonData.divingSuit,\n        waterType: jsonData.waterType,\n        waterEntryType: jsonData.waterEntryType,\n        ballast: jsonData.ballast,\n        glovesType: jsonData.glovesType,\n        divingType: jsonData.divingType,\n        comment: jsonData.comment\n      }, () => {\n        let doc = new jsPDF({\n          orientation: \"p\",\n          unit: \"mm\"\n        });\n        let img = new Image();\n        img.src = divelogLogo;\n        var output = this.renderDataForHTML(); // doc.text(`Imię partnera:  ${this.state.partnerName}`, 10, 10);\n        // doc.text(`Nazwisko partnera: ${this.state.partnerSurname}`, 10, 10);\n        // doc.addImage(img, 'PNG', 15, 40, 100, 100);\n\n        doc.addHTML($(\".pdf-logbook-container\").html(), 20, 20, {\n          'width': 500,\n          'elementHandlers': this.specialElementHandlers\n        });\n        doc.save(\"pdf\");\n      });\n    });\n  }\n\n  render() {\n    let createdAt = new Date();\n    let createdTimeDocument = createdAt.getFullYear() + \"-\" + createdAt.getMonth() + \"-\" + createdAt.getDay() + \" \" + createdAt.getHours() + \":\" + createdAt.getMinutes();\n    const stylesPdfDocument = {\n      'width': '100%',\n      'text-align': 'right',\n      'color': 'lightgray',\n      'font-size': '12px'\n    };\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: this.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"PDF\"), React.createElement(\"div\", {\n      className: \"pdf-logbook-container\",\n      style: {\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: '100%',\n        textAlign: 'right',\n        color: 'lightgray',\n        fontSize: '12px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Generated by Divelog - \", createdTimeDocument), \"Hubert Struminski\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      style: {\n        color: 'red'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Imi\\u0119 partnera: \", this.state.partnerName), React.createElement(\"p\", {\n      style: {\n        color: 'blue'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Comment: \", this.state.comment)));\n  }\n\n}\n\nexport default withTranslation(\"common\")(PDFTableButton);","map":{"version":3,"sources":["/home/huber/Pulpit/divelog/react-divelog/src/components/logbook/PDFTableButton.js"],"names":["React","withTranslation","jsPDF","divelogLogo","ConvertTime","$","PDFTableButton","Component","constructor","props","specialElementHandlers","element","renderer","state","partnerName","partnerSurname","marker","entryTime","exitTime","averageDepth","maxDepth","visibility","waterTemperature","airTemperature","cylinderCapacity","divingSuit","waterType","waterEntryType","ballast","glovesType","divingType","comment","onClick","bind","renderDataForHTML","e","preventDefault","id","jwtToken","localStorage","getItem","fetch","method","headers","then","response","json","jsonData","time","convertTime","markerElement","name","latitude","longitude","setState","doc","orientation","unit","img","Image","src","output","addHTML","html","save","render","createdAt","Date","createdTimeDocument","getFullYear","getMonth","getDay","getHours","getMinutes","stylesPdfDocument","display","width","textAlign","color","fontSize"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport jsPDF from 'jspdf';\nimport divelogLogo from '../../img/logo.png';\nimport ConvertTime from '../../util/ConvertTime';\nimport $ from 'jquery';\nimport '../../css/PdfLogbook.css';\n\nclass PDFTableButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            partnerName: '',\n            partnerSurname: '',\n            marker: {},\n            entryTime: '',\n            exitTime: '',\n            averageDepth: 0.0,\n            maxDepth: 0.0,\n            visibility: 0.0,\n            waterTemperature: 0.0,\n            airTemperature: 0.0,\n            cylinderCapacity: '',\n            divingSuit: 'NONE',\n            waterType: 'NONE',\n            waterEntryType: 'NONE',\n            ballast: 0.0,\n            glovesType: 'NONE',\n            divingType: 'NONE',\n            comment: ''\n        }\n        this.ConvertTime = new ConvertTime();\n        this.onClick = this.onClick.bind(this);\n    }\n\n    renderDataForHTML() {\n        return (\n            <h1>Hubert Struminski</h1>\n        );\n    }\n\n    onClick(e) {\n        e.preventDefault();\n\n        const id = this.props.id;\n        let jwtToken = localStorage.getItem(\"JwtToken\");\n\n        fetch(`/pdf/logbook/${id}/${jwtToken}`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'content-type': 'application/json'\n            }\n        })\n        .then(response => response.json())\n        .then(jsonData => {\n            let time = this.ConvertTime.convertTime(jsonData.entryTime, jsonData.exitTime, true);\n\n            const markerElement = {\n                id: jsonData.marker.id,\n                name: jsonData.marker.name,\n                latitude: jsonData.marker.latitude,\n                longitude: jsonData.marker.longitude\n            }\n\n            this.setState({\n                partnerName: jsonData.partnerName,\n                partnerSurname: jsonData.partnerSurname,\n                marker: markerElement,\n                entryTime: time[0],\n                exitTime: time[1],\n                averageDepth: jsonData.averageDepth,\n                maxDepth: jsonData.maxDepth,\n                visibility: jsonData.visibility,\n                waterTemperature: jsonData.waterTemperature,\n                airTemperature: jsonData.airTemperature,\n                cylinderCapacity: jsonData.cylinderCapacity,\n                divingSuit: jsonData.divingSuit,\n                waterType: jsonData.waterType,\n                waterEntryType: jsonData.waterEntryType,\n                ballast: jsonData.ballast,\n                glovesType: jsonData.glovesType,\n                divingType: jsonData.divingType,\n                comment: jsonData.comment\n            }, () => {\n                let doc = new jsPDF({\n                    orientation: \"p\",\n                    unit: \"mm\",\n                });\n                let img = new Image();\n                img.src = divelogLogo;\n        \n                var output = this.renderDataForHTML();\n                // doc.text(`Imię partnera:  ${this.state.partnerName}`, 10, 10);\n                // doc.text(`Nazwisko partnera: ${this.state.partnerSurname}`, 10, 10);\n                // doc.addImage(img, 'PNG', 15, 40, 100, 100);\n                doc.addHTML($(\".pdf-logbook-container\").html(), 20, 20, { 'width': 500, 'elementHandlers': this.specialElementHandlers });\n        \n                doc.save(\"pdf\");\n            });\n        }); \n    }\n\n    specialElementHandlers = {\n        '#hubert': function (element, renderer) {\n            return true;\n        },\n        '.controls': function (element, renderer) {\n            return true;\n        }\n    };\n\n    render() {\n        let createdAt = new Date();\n        let createdTimeDocument = createdAt.getFullYear() + \"-\" + createdAt.getMonth() + \"-\" + createdAt.getDay() + \" \" + createdAt.getHours() + \":\" + createdAt.getMinutes();\n\n        const stylesPdfDocument = {\n            'width': '100%',\n            'text-align': 'right',\n            'color': 'lightgray',\n            'font-size': '12px'\n        }\n        return (\n            <div>\n                <button className=\"btn btn-primary\"\n                    onClick={this.onClick}\n                >\n                    PDF\n                </button>\n\n                <div className=\"pdf-logbook-container\" style={{ display: 'none'}}>\n                    <div style={{ width: '100%', textAlign: 'right', color: 'lightgray', fontSize: '12px'}}>\n                        Generated by Divelog - { createdTimeDocument }\n                    </div>\n                    Hubert Struminski  \n                        <br />\n                        <br />\n                        <h5 style={{ color: 'red'}}>Imię partnera: {this.state.partnerName}</h5>\n                        <p style={{ color: 'blue'}}>Comment: {this.state.comment}</p>    \n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withTranslation(\"common\")(PDFTableButton);"]},"metadata":{},"sourceType":"module"}