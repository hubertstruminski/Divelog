/*
 * Copyright (c) 2018 by Filestack
 * Some rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { __awaiter, __generator } from "tslib";
import { loadModule, knownModuleIds } from 'filestack-loader';
import { FilestackError, FilestackErrorType } from './../filestack_error';
import { getValidator, PickerParamsSchema } from './../schema';
export var RotateDirection;
(function (RotateDirection) {
    RotateDirection["cw"] = "CW";
    RotateDirection["ccw"] = "CCW";
})(RotateDirection || (RotateDirection = {}));
export var PickerDisplayMode;
(function (PickerDisplayMode) {
    PickerDisplayMode["inline"] = "inline";
    PickerDisplayMode["overlay"] = "overlay";
    PickerDisplayMode["dropPane"] = "dropPane";
})(PickerDisplayMode || (PickerDisplayMode = {}));
/**
 * @private
 * A synchronous-looking wrapper for loading the picker and calling its methods.
 * This is currently needed because the picker module is loaded asynchronously.
 * Eventually we should offer a bundle with the picker module included.
 */
var PickerLoader = /** @class */ (function () {
    function PickerLoader(client, options) {
        var validateRes = getValidator(PickerParamsSchema)(options);
        if (validateRes.errors.length) {
            throw new FilestackError("Invalid picker params", validateRes.errors, FilestackErrorType.VALIDATION);
        }
        this._initialized = this.loadModule(client, options);
    }
    PickerLoader.prototype.open = function () {
        return __awaiter(this, void 0, void 0, function () {
            var picker;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this._initialized];
                    case 1:
                        picker = _a.sent();
                        return [4 /*yield*/, picker.open()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    PickerLoader.prototype.crop = function (files) {
        return __awaiter(this, void 0, void 0, function () {
            var picker;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this._initialized];
                    case 1:
                        picker = _a.sent();
                        return [4 /*yield*/, picker.crop(files)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    PickerLoader.prototype.close = function () {
        return __awaiter(this, void 0, void 0, function () {
            var picker;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this._initialized];
                    case 1:
                        picker = _a.sent();
                        return [4 /*yield*/, picker.close()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    PickerLoader.prototype.cancel = function () {
        return __awaiter(this, void 0, void 0, function () {
            var picker;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this._initialized];
                    case 1:
                        picker = _a.sent();
                        return [4 /*yield*/, picker.cancel()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    PickerLoader.prototype.loadModule = function (client, options) {
        return __awaiter(this, void 0, void 0, function () {
            var url, Picker;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        url = client.session.urls.pickerUrl;
                        return [4 /*yield*/, loadModule(url, knownModuleIds.picker)];
                    case 1:
                        Picker = _a.sent();
                        return [2 /*return*/, new Picker(client, options)];
                }
            });
        });
    };
    return PickerLoader;
}());
/**
 * Loads and creates picker instance
 *
 * @private
 * @param client
 * @param options
 */
export var picker = function (client, options) {
    return new PickerLoader(client, options);
};

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvcGlja2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRzs7QUFFSCxPQUFPLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzlELE9BQU8sRUFBRSxjQUFjLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUcxRSxPQUFPLEVBQUUsWUFBWSxFQUFFLGtCQUFrQixFQUFFLE1BQU0sYUFBYSxDQUFDO0FBK0QvRCxNQUFNLENBQU4sSUFBWSxlQUdYO0FBSEQsV0FBWSxlQUFlO0lBQ3pCLDRCQUFTLENBQUE7SUFDVCw4QkFBVSxDQUFBO0FBQ1osQ0FBQyxFQUhXLGVBQWUsS0FBZixlQUFlLFFBRzFCO0FBd0dELE1BQU0sQ0FBTixJQUFZLGlCQUlYO0FBSkQsV0FBWSxpQkFBaUI7SUFDM0Isc0NBQWlCLENBQUE7SUFDakIsd0NBQW1CLENBQUE7SUFDbkIsMENBQXFCLENBQUE7QUFDdkIsQ0FBQyxFQUpXLGlCQUFpQixLQUFqQixpQkFBaUIsUUFJNUI7QUFzZkQ7Ozs7O0dBS0c7QUFDSDtJQUlFLHNCQUFZLE1BQWMsRUFBRSxPQUF1QjtRQUNqRCxJQUFNLFdBQVcsR0FBRyxZQUFZLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM5RCxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFO1lBQzdCLE1BQU0sSUFBSSxjQUFjLENBQUMsdUJBQXVCLEVBQUUsV0FBVyxDQUFDLE1BQU0sRUFBRSxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUN0RztRQUVELElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUVLLDJCQUFJLEdBQVY7Ozs7OzRCQUNpQixxQkFBTSxJQUFJLENBQUMsWUFBWSxFQUFBOzt3QkFBaEMsTUFBTSxHQUFHLFNBQXVCO3dCQUN0QyxxQkFBTSxNQUFNLENBQUMsSUFBSSxFQUFFLEVBQUE7O3dCQUFuQixTQUFtQixDQUFDOzs7OztLQUNyQjtJQUVLLDJCQUFJLEdBQVYsVUFBVyxLQUFZOzs7Ozs0QkFDTixxQkFBTSxJQUFJLENBQUMsWUFBWSxFQUFBOzt3QkFBaEMsTUFBTSxHQUFHLFNBQXVCO3dCQUN0QyxxQkFBTSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFBOzt3QkFBeEIsU0FBd0IsQ0FBQzs7Ozs7S0FDMUI7SUFFSyw0QkFBSyxHQUFYOzs7Ozs0QkFDaUIscUJBQU0sSUFBSSxDQUFDLFlBQVksRUFBQTs7d0JBQWhDLE1BQU0sR0FBRyxTQUF1Qjt3QkFDdEMscUJBQU0sTUFBTSxDQUFDLEtBQUssRUFBRSxFQUFBOzt3QkFBcEIsU0FBb0IsQ0FBQzs7Ozs7S0FDdEI7SUFFSyw2QkFBTSxHQUFaOzs7Ozs0QkFDaUIscUJBQU0sSUFBSSxDQUFDLFlBQVksRUFBQTs7d0JBQWhDLE1BQU0sR0FBRyxTQUF1Qjt3QkFDdEMscUJBQU0sTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFBOzt3QkFBckIsU0FBcUIsQ0FBQzs7Ozs7S0FDdkI7SUFFYSxpQ0FBVSxHQUF4QixVQUF5QixNQUFjLEVBQUUsT0FBdUI7Ozs7Ozt3QkFDeEIsR0FBRyxHQUFTLE1BQU0sdUJBQWYsQ0FBZ0I7d0JBQzFDLHFCQUFNLFVBQVUsQ0FBQyxHQUFHLEVBQUUsY0FBYyxDQUFDLE1BQU0sQ0FBQyxFQUFBOzt3QkFBckQsTUFBTSxHQUFHLFNBQTRDO3dCQUMzRCxzQkFBTyxJQUFJLE1BQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLEVBQUM7Ozs7S0FDcEM7SUFDSCxtQkFBQztBQUFELENBdENBLEFBc0NDLElBQUE7QUFFRDs7Ozs7O0dBTUc7QUFDSCxNQUFNLENBQUMsSUFBTSxNQUFNLEdBQUcsVUFBQyxNQUFjLEVBQUUsT0FBdUI7SUFDNUQsT0FBTyxJQUFJLFlBQVksQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDM0MsQ0FBQyxDQUFDIiwiZmlsZSI6ImxpYi9waWNrZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IGJ5IEZpbGVzdGFja1xuICogU29tZSByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGxvYWRNb2R1bGUsIGtub3duTW9kdWxlSWRzIH0gZnJvbSAnZmlsZXN0YWNrLWxvYWRlcic7XG5pbXBvcnQgeyBGaWxlc3RhY2tFcnJvciwgRmlsZXN0YWNrRXJyb3JUeXBlIH0gZnJvbSAnLi8uLi9maWxlc3RhY2tfZXJyb3InO1xuaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSAnLi9jbGllbnQnO1xuaW1wb3J0IHsgRlNQcm9ncmVzc0V2ZW50LCBVcGxvYWRPcHRpb25zLCBXb3JrZmxvd0NvbmZpZyB9IGZyb20gJy4vYXBpL3VwbG9hZC90eXBlcyc7XG5pbXBvcnQgeyBnZXRWYWxpZGF0b3IsIFBpY2tlclBhcmFtc1NjaGVtYSB9IGZyb20gJy4vLi4vc2NoZW1hJztcblxuZXhwb3J0IGludGVyZmFjZSBQaWNrZXJJbnN0YW5jZSB7XG4gIC8qKlxuICAgKiBDbG9zZSBwaWNrZXIuIFRoaXMgb3BlcmF0aW9uIGlzIGlkZW1wb3RlbnQuXG4gICAqL1xuICBjbG9zZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcblxuICAvKipcbiAgICogQ2FuY2VsIHBpY2tlciB1cGxvYWRzLiBUaGlzIG9wZXJhdGlvbiBpcyBpZGVtcG90ZW50LlxuICAgKi9cbiAgY2FuY2VsOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuXG4gIC8qKlxuICAgKiBPcGVuIHBpY2tlci4gVGhpcyBvcGVyYXRpb24gaXMgaWRlbXBvdGVudC5cbiAgICovXG4gIG9wZW46ICgpID0+IFByb21pc2U8dm9pZD47XG5cbiAgLyoqXG4gICAqIFNwZWNpZnkgYSBsaXN0IG9mIGZpbGVzIHRvIG9wZW4gaW4gdGhlIHBpY2tlciBmb3IgY3JvcHBpbmdcbiAgICpcbiAgICogIyMjIEV4YW1wbGVcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gPGlucHV0IGlkPVwiZmlsZVNlbGVjdFwiIHR5cGU9XCJmaWxlXCI+XG4gICAqXG4gICAqIGNvbnN0IGlucHV0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZVNlbGVjdCcpO1xuICAgKiBjb25zdCBwaWNrZXIgPSBjbGllbnQucGlja2VyKHtcbiAgICogICBvblVwbG9hZERvbmU6IHJlcyA9PiBjb25zb2xlLmxvZyhyZXMpLFxuICAgKiB9KTtcbiAgICpcbiAgICogaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgKiAgIHBpY2tlci5jcm9wKGUudGFyZ2V0LmZpbGVzKTtcbiAgICogfSk7XG4gICAqXG4gICAqIC8vIE9yIHBhc3MgYW4gYXJyYXkgb2YgVVJMIHN0cmluZ3NcbiAgICogY29uc3QgdXJscyA9IFtcbiAgICogICAnaHR0cHM6Ly9kMXd0cWFmZmFhajYzei5jbG91ZGZyb250Lm5ldC9pbWFnZXMvZm94X2luX2ZvcmVzdDEuanBnJyxcbiAgICogICAnaHR0cHM6Ly9kMXd0cWFmZmFhajYzei5jbG91ZGZyb250Lm5ldC9pbWFnZXMvc2FpbC5qcGcnLFxuICAgKiBdO1xuICAgKiBwaWNrZXIuY3JvcCh1cmxzKTtcbiAgICogYGBgXG4gICAqL1xuICBjcm9wOiAoZmlsZXM6IGFueVtdKSA9PiBQcm9taXNlPHZvaWQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBpY2tlckNyb3BwZWREYXRhIHtcbiAgY3JvcEFyZWE6IHtcbiAgICAvKipcbiAgICAgKiBbeCwgeV1cbiAgICAgKi9cbiAgICBwb3NpdGlvbjogW251bWJlciwgbnVtYmVyXTtcbiAgICAvKipcbiAgICAgKiBbd2lkdGgsIGhlaWdodF1cbiAgICAgKi9cbiAgICBzaXplOiBbbnVtYmVyLCBudW1iZXJdO1xuICB9O1xuICAgIC8qKlxuICAgICAqIFt3aWR0aCwgaGVpZ2h0XVxuICAgICAqL1xuICBvcmlnaW5hbEltYWdlU2l6ZTogW251bWJlciwgbnVtYmVyXTtcbn1cblxuZXhwb3J0IGVudW0gUm90YXRlRGlyZWN0aW9uIHtcbiAgY3cgPSAnQ1cnLFxuICBjY3c9ICdDQ1cnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBpY2tlclJvdGF0ZWREYXRhIHtcbiAgLyoqXG4gICAqIEFtb3VudCByb3RhdGVkIGluIGRlZ3JlZXMuXG4gICAqL1xuICB2YWx1ZTogbnVtYmVyO1xuICAvKipcbiAgICogQ2FuIGJlIENXIG9yIENDVyAoY2xvY2t3aXNlIC8gY291bnRlci1jbG9ja3dpc2UpXG4gICAqL1xuICBkaXJlY3Rpb246IFJvdGF0ZURpcmVjdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQaWNrZXJGaWxlTWV0YWRhdGEge1xuICAvKipcbiAgICogVGhlIGNsb3VkIGNvbnRhaW5lciBmb3IgdGhlIHVwbG9hZGVkIGZpbGUuXG4gICAqL1xuICBjb250YWluZXI/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBQb3NpdGlvbiBhbmQgc2l6ZSBpbmZvcm1hdGlvbiBmb3IgY3JvcHBlZCBpbWFnZXMuXG4gICAqL1xuICBjcm9wcGVkPzogUGlja2VyQ3JvcHBlZERhdGE7XG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSBmaWxlLlxuICAgKi9cbiAgZmlsZW5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqIEZpbGVzdGFjayBoYW5kbGUgZm9yIHRoZSB1cGxvYWRlZCBmaWxlLlxuICAgKi9cbiAgaGFuZGxlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgaGFzaC1wcmVmaXhlZCBjbG91ZCBzdG9yYWdlIHBhdGguXG4gICAqL1xuICBrZXk/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgTUlNRSB0eXBlIG9mIHRoZSBmaWxlLlxuICAgKi9cbiAgbWltZXR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqIFByb3BlcnRpZXMgb2YgdGhlIGxvY2FsIGJpbmFyeSBmaWxlLiBBbHNvIHNlZSB0aGUgcGljayBvcHRpb24gYGV4cG9zZU9yaWdpbmFsRmlsZWAgaWYgeW91IHdhbnQgdGhlIHVuZGVybHlpbmcgYEZpbGVgIG9iamVjdC5cbiAgICovXG4gIG9yaWdpbmFsRmlsZT86IG9iamVjdCB8IEZpbGU7XG4gIC8qKlxuICAgKiBUaGUgb3JpZ2luIG9mIHRoZSBmaWxlLCBlLmcuIC9Gb2xkZXIvZmlsZS5qcGcuXG4gICAqL1xuICBvcmlnaW5hbFBhdGg6IHN0cmluZztcbiAgLyoqXG4gICAqIERpcmVjdGlvbiBhbmQgdmFsdWUgaW5mb3JtYXRpb24gZm9yIHJvdGF0ZWQgaW1hZ2VzLlxuICAgKi9cbiAgcm90YXRlZD86IFBpY2tlclJvdGF0ZWREYXRhO1xuICAvKipcbiAgICogU2l6ZSBpbiBieXRlcyBvZiB0aGUgdXBsb2FkZWQgZmlsZS5cbiAgICovXG4gIHNpemU6IG51bWJlcjtcbiAgLyoqXG4gICAqIFRoZSBzb3VyY2UgZnJvbSB3aGVyZSB0aGUgZmlsZSB3YXMgcGlja2VkLlxuICAgKi9cbiAgc291cmNlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgRmlsZXN0YWNrIHRyYW5zaXQgc3RhdHVzLlxuICAgKi9cbiAgc3RhdHVzPzogc3RyaW5nO1xuICAvKipcbiAgICogQSB1dWlkIGZvciB0cmFja2luZyB0aGlzIGZpbGUgaW4gY2FsbGJhY2tzLlxuICAgKi9cbiAgdXBsb2FkSWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBGaWxlc3RhY2sgQ0ROIFVSTCBmb3IgdGhlIHVwbG9hZGVkIGZpbGUuXG4gICAqL1xuICB1cmw6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDdXN0b21BdXRoVGV4dE9wdGlvbnMge1xuICBba2V5OiBzdHJpbmddOiB7XG4gICAgdG9wPzogc3RyaW5nW10sXG4gICAgYm90dG9tPzogc3RyaW5nW11cbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQaWNrZXJSZXNwb25zZSB7XG4gIGZpbGVzVXBsb2FkZWQ6IFBpY2tlckZpbGVNZXRhZGF0YVtdO1xuICBmaWxlc0ZhaWxlZDogUGlja2VyRmlsZU1ldGFkYXRhW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGlja2VyRmlsZUNhbGxiYWNrIHtcbiAgKGZpbGU6IFBpY2tlckZpbGVNZXRhZGF0YSk6IHZvaWQgfCBQcm9taXNlPGFueT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGlja2VyRmlsZUVycm9yQ2FsbGJhY2sge1xuICAoZmlsZTogUGlja2VyRmlsZU1ldGFkYXRhLCBlcnJvcjogRXJyb3IpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBpY2tlckZpbGVQcm9ncmVzc0NhbGxiYWNrIHtcbiAgKGZpbGU6IFBpY2tlckZpbGVNZXRhZGF0YSwgZXZlbnQ6IEZTUHJvZ3Jlc3NFdmVudCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGlja2VyVXBsb2FkU3RhcnRlZENhbGxiYWNrIHtcbiAgKGZpbGVzOiBQaWNrZXJGaWxlTWV0YWRhdGFbXSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGlja2VyVXBsb2FkRG9uZUNhbGxiYWNrIHtcbiAgKGZpbGVzOiBQaWNrZXJSZXNwb25zZSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBlbnVtIFBpY2tlckRpc3BsYXlNb2RlIHtcbiAgaW5saW5lID0gJ2lubGluZScsXG4gIG92ZXJsYXkgPSAnb3ZlcmxheScsXG4gIGRyb3BQYW5lID0gJ2Ryb3BQYW5lJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQaWNrZXJEcm9wUGFuZU9wdGlvbnMge1xuICAvKipcbiAgICogVG9nZ2xlIHRoZSBjcm9wIFVJIGZvciBkcm9wcGVkIGZpbGVzLlxuICAgKi9cbiAgY3JvcEZpbGVzPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEN1c3RvbWl6ZSB0aGUgdGV4dCBjb250ZW50IGluIHRoZSBkcm9wIHBhbmUuXG4gICAqL1xuICBjdXN0b21UZXh0Pzogc3RyaW5nO1xuICAvKipcbiAgICogRGlzYWJsZSB0aGUgZmlsZSBpbnB1dCBvbiBjbGljay4gVGhpcyBkb2VzIG5vdCBkaXNhYmxlIHRoZSBgb25DbGlja2AgY2FsbGJhY2suXG4gICAqL1xuICBkaXNhYmxlQ2xpY2s/OiBib29sZWFuO1xuICAvKipcbiAgICogVG9nZ2xlIHRoZSBmdWxsLXBhZ2UgZHJvcCB6b25lIG92ZXJsYXkuXG4gICAqL1xuICBvdmVybGF5PzogYm9vbGVhbjtcbiAgb25EcmFnRW50ZXI/OiAoZXZ0OiBEcmFnRXZlbnQpID0+IHZvaWQ7XG4gIG9uRHJhZ0xlYXZlPzogKCkgPT4gdm9pZDtcbiAgb25EcmFnT3Zlcj86IChldnQ6IERyYWdFdmVudCkgPT4gdm9pZDtcbiAgb25Ecm9wPzogKGV2dDogRHJhZ0V2ZW50KSA9PiB2b2lkO1xuICAvKipcbiAgICogYG9uU3VjY2Vzc2AgbXVzdCBiZSB1c2VkIGluc3RlYWQgb2YgYG9uVXBsb2FkRG9uZWAuIFRoZSBkcm9wIHBhbmUgdXNlcyBpdHMgb3duIGNhbGxiYWNrcyBmb3IgY29tcGF0aWJpbGl0eSBwdXJwb3Nlcy4gVGhpcyBtaWdodCBldmVudHVhbGx5IGNoYW5nZS5cbiAgICovXG4gIG9uU3VjY2Vzcz86IChmaWxlczogUGlja2VyRmlsZU1ldGFkYXRhW10pID0+IHZvaWQ7XG4gIG9uRXJyb3I/OiAoZmlsZXM6IFBpY2tlckZpbGVNZXRhZGF0YVtdKSA9PiB2b2lkO1xuICBvblByb2dyZXNzPzogKHBlcmNlbnQ6IG51bWJlcikgPT4gdm9pZDtcbiAgb25DbGljaz86IChldnQ6IGFueSkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFRvZ2dsZSBpY29uIGVsZW1lbnQgaW4gZHJvcCBwYW5lLlxuICAgKi9cbiAgc2hvd0ljb24/OiBib29sZWFuO1xuICAvKipcbiAgICogVG9nZ2xlIHVwbG9hZCBwcm9ncmVzcyBkaXNwbGF5LlxuICAgKi9cbiAgc2hvd1Byb2dyZXNzPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQaWNrZXJTdG9yZU9wdGlvbnMge1xuICAvKipcbiAgICogTG9jYXRpb24gZm9yIHN0b3JlZCBmaWxlLiBPbmUgb2YgJ3MzJywgJ2djcycsICdhenVyZScsICdyYWNrc3BhY2UnLCBvciAnZHJvcGJveCcuXG4gICAqL1xuICBsb2NhdGlvbj86IHN0cmluZztcbiAgLyoqXG4gICAqIFNwZWNpZnkgc3RvcmFnZSBjb250YWluZXIuXG4gICAqL1xuICBjb250YWluZXI/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBTZXQgY29udGFpbmVyIHBhdGguIEluZGljYXRlIGEgZm9sZGVyIGJ5IGFkZGluZyBhIHRyYWlsaW5nIHNsYXNoLiBXaXRob3V0IGEgdHJhaWxpbmcgc2xhc2ggYWxsIGZpbGVzIHdpbGwgYmUgc3RvcmVkIHRvIHRoZSBzYW1lIG9iamVjdC5cbiAgICovXG4gIHBhdGg/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBTcGVjaWZ5IFMzIHJlZ2lvbi5cbiAgICovXG4gIHJlZ2lvbj86IHN0cmluZztcbiAgLyoqXG4gICAqIFMzIGNvbnRhaW5lciBhY2Nlc3MuICdwdWJsaWMnIG9yICdwcml2YXRlJy5cbiAgICovXG4gIGFjY2Vzcz86IHN0cmluZztcblxuICAvKipcbiAgICogV29ya2Zsb3dzIGlkcyB0byBydW4gYWZ0ZXIgdXBsb2FkXG4gICAqL1xuICB3b3JrZmxvd3M/OiBzdHJpbmdbXSB8IFdvcmtmbG93Q29uZmlnW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGlja2VyQ3VzdG9tVGV4dCB7XG4gIC8vIEFjdGlvbnNcbiAgVXBsb2FkPzogc3RyaW5nO1xuICAnVXBsb2FkIG1vcmUnPzogc3RyaW5nO1xuICAnRGVzZWxlY3QgQWxsJz86IHN0cmluZztcbiAgJ1ZpZXcvRWRpdCBTZWxlY3RlZCc/OiBzdHJpbmc7XG4gICdTaWduIE91dCc/OiBzdHJpbmc7XG5cbiAgLy8gU291cmNlIExhYmVsc1xuICAnTXkgRGV2aWNlJz86IHN0cmluZztcbiAgJ1dlYiBTZWFyY2gnPzogc3RyaW5nO1xuICAnVGFrZSBQaG90byc/OiBzdHJpbmc7XG4gICdMaW5rIChVUkwpJz86IHN0cmluZztcbiAgJ1JlY29yZCBWaWRlbyc/OiBzdHJpbmc7XG4gICdSZWNvcmQgQXVkaW8nPzogc3RyaW5nO1xuXG4gIC8vIEN1c3RvbSBTb3VyY2VcbiAgJ0N1c3RvbSBTb3VyY2UnPzogc3RyaW5nO1xuXG4gIC8vIEZvb3RlciBUZXh0XG4gIEFkZD86IHN0cmluZztcbiAgJ21vcmUgZmlsZSc/OiBzdHJpbmc7XG4gICdtb3JlIGZpbGVzJz86IHN0cmluZztcblxuICAvLyBDbG91ZFxuICAnQ29ubmVjdCB7cHJvdmlkZXJOYW1lfSc/OiBzdHJpbmc7XG4gICdTZWxlY3QgRmlsZXMgZnJvbSB7cHJvdmlkZXJOYW1lfSc/OiBzdHJpbmc7XG4gICdZb3UgbmVlZCB0byBhdXRoZW50aWNhdGUgd2l0aCB7cHJvdmlkZXJOYW1lfS4nPzogc3RyaW5nO1xuICAnQSBuZXcgcGFnZSB3aWxsIG9wZW4gdG8gY29ubmVjdCB5b3VyIGFjY291bnQuJz86IHN0cmluZztcbiAgJ1dlIG9ubHkgZXh0cmFjdCBpbWFnZXMgYW5kIG5ldmVyIG1vZGlmeSBvciBkZWxldGUgdGhlbS4nPzogc3RyaW5nO1xuICAnVG8gZGlzY29ubmVjdCBmcm9tIHtwcm92aWRlck5hbWV9IGNsaWNrIFwiU2lnbiBvdXRcIiBidXR0b24gaW4gdGhlIG1lbnUuJz86IHN0cmluZztcbiAgJ1NpZ24gaW4gd2l0aCBHb29nbGUnPzogc3RyaW5nO1xuICAnR28gYmFjayc/OiBzdHJpbmc7XG4gICdUaGlzIGZvbGRlciBpcyBlbXB0eS4nPzogc3RyaW5nO1xuXG4gIC8vIFN1bW1hcnlcbiAgRmlsZXM/OiBzdHJpbmc7XG4gIEltYWdlcz86IHN0cmluZztcbiAgVXBsb2FkZWQ/OiBzdHJpbmc7XG4gIFVwbG9hZGluZz86IHN0cmluZztcbiAgQ29tcGxldGVkPzogc3RyaW5nO1xuICBGaWx0ZXI/OiBzdHJpbmc7XG4gICdDcm9wcGVkIEltYWdlcyc/OiBzdHJpbmc7XG4gICdFZGl0ZWQgSW1hZ2VzJz86IHN0cmluZztcbiAgJ1NlbGVjdGVkIEZpbGVzJz86IHN0cmluZztcbiAgJ0Nyb3AgaXMgcmVxdWlyZWQgb24gaW1hZ2VzJz86IHN0cmluZztcblxuICAvLyBUcmFuc2Zvcm1cbiAgQ3JvcD86IHN0cmluZztcbiAgQ2lyY2xlPzogc3RyaW5nO1xuICBSb3RhdGU/OiBzdHJpbmc7XG4gIE1hc2s/OiBzdHJpbmc7XG4gIFJldmVydD86IHN0cmluZztcbiAgRWRpdD86IHN0cmluZztcbiAgUmVzZXQ/OiBzdHJpbmc7XG4gIERvbmU/OiBzdHJpbmc7XG4gIFNhdmU/OiBzdHJpbmc7XG4gIE5leHQ/OiBzdHJpbmc7XG4gICdFZGl0IEltYWdlJz86IHN0cmluZztcbiAgJ1RoaXMgaW1hZ2UgY2Fubm90IGJlIGVkaXRlZCc/OiBzdHJpbmc7XG5cbiAgLy8gUmV0cnkgbWVzc2FnaW5nXG4gICdDb25uZWN0aW9uIExvc3QnPzogc3RyaW5nO1xuICAnRmFpbGVkIFdoaWxlIFVwbG9hZGluZyc/OiBzdHJpbmc7XG4gICdSZXRyeWluZyBpbic/OiBzdHJpbmc7XG4gICdUcnkgYWdhaW4nPzogc3RyaW5nO1xuICAnVHJ5IG5vdyc/OiBzdHJpbmc7XG5cbiAgLy8gTG9jYWwgRmlsZSBTb3VyY2VcbiAgJ0RyYWcgYW5kIERyb3AsIENvcHkgYW5kIFBhc3RlIEZpbGVzJz86IHN0cmluZztcbiAgJ29yIERyYWcgYW5kIERyb3AsIENvcHkgYW5kIFBhc3RlIEZpbGVzJz86IHN0cmluZztcbiAgJ1NlbGVjdCBGaWxlcyB0byBVcGxvYWQnPzogc3RyaW5nO1xuICAnU2VsZWN0IEZyb20nPzogc3RyaW5nO1xuICAnRHJvcCB5b3VyIGZpbGVzIGFueXdoZXJlJz86IHN0cmluZztcblxuICAvLyBJbnB1dCBwbGFjZWhvbGRlcnNcbiAgJ0VudGVyIGEgVVJMJz86IHN0cmluZztcbiAgJ1NlYXJjaCBpbWFnZXMnPzogc3RyaW5nO1xuXG4gIC8vIFdlYmNhbSBTb3VyY2VcbiAgJ1dlYmNhbSBEaXNhYmxlZCc/OiBzdHJpbmc7XG4gICdXZWJjYW0gTm90IFN1cHBvcnRlZCc/OiBzdHJpbmc7XG4gICdQbGVhc2UgZW5hYmxlIHlvdXIgd2ViY2FtIHRvIHRha2UgYSBwaG90by4nPzogc3RyaW5nO1xuICAnWW91ciBjdXJyZW50IGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB3ZWJjYW0gZnVuY3Rpb25hbGl0eS4nPzogc3RyaW5nO1xuICAnV2Ugc3VnZ2VzdCB1c2luZyBDaHJvbWUgb3IgRmlyZWZveC4nPzogc3RyaW5nO1xuXG4gIC8vIEVycm9yIE5vdGlmaWNhdGlvbnNcbiAgJ0ZpbGUge2Rpc3BsYXlOYW1lfSBpcyBub3QgYW4gYWNjZXB0ZWQgZmlsZSB0eXBlLiBUaGUgYWNjZXB0ZWQgZmlsZSB0eXBlcyBhcmUge3R5cGVzfSc/OiBzdHJpbmc7XG4gICdGaWxlIHtkaXNwbGF5TmFtZX0gaXMgdG9vIGJpZy4gVGhlIGFjY2VwdGVkIGZpbGUgc2l6ZSBpcyBsZXNzIHRoYW4ge3JvdW5kRmlsZVNpemV9Jz86IHN0cmluZztcbiAgJ091ciBmaWxlIHVwbG9hZCBsaW1pdCBpcyB7bWF4RmlsZXN9IHtmaWxlc1RleHR9Jz86IHN0cmluZztcbiAgJ05vIHNlYXJjaCByZXN1bHRzIGZvdW5kIGZvciBcIntzZWFyY2h9XCInPzogc3RyaW5nO1xuICAnQW4gZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4uJz86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQaWNrZXJPcHRpb25zIHtcbiAgLyoqXG4gICAqIFJlc3RyaWN0IGZpbGUgdHlwZXMgdGhhdCBhcmUgYWxsb3dlZCB0byBiZSBwaWNrZWQuIEZvcm1hdHMgYWNjZXB0ZWQ6XG4gICAqICAtIC5wZGYgPC0gYW55IGZpbGUgZXh0ZW5zaW9uXG4gICAqICAtIGltYWdlL2pwZWcgPC0gYW55IG1pbWUgdHlwZSBjb21tb25seSBrbm93biBieSBicm93c2Vyc1xuICAgKiAgLSBpbWFnZS8qIDwtIGFjY2VwdCBhbGwgdHlwZXMgb2YgaW1hZ2VzXG4gICAqICAtIHZpZGVvLyogPC0gYWNjZXB0IGFsbCB0eXBlcyBvZiB2aWRlbyBmaWxlc1xuICAgKiAgLSBhdWRpby8qIDwtIGFjY2VwdCBhbGwgdHlwZXMgb2YgYXVkaW8gZmlsZXNcbiAgICogIC0gYXBwbGljYXRpb24vKiA8LSBhY2NlcHQgYWxsIHR5cGVzIG9mIGFwcGxpY2F0aW9uIGZpbGVzXG4gICAqICAtIHRleHQvKiA8LSBhY2NlcHQgYWxsIHR5cGVzIG9mIHRleHQgZmlsZXNcbiAgICovXG4gIGFjY2VwdD86IHN0cmluZyB8IHN0cmluZ1tdO1xuICAvKipcbiAgICogUHJldmVudCBtb2RhbCBjbG9zZSBvbiB1cGxvYWQgZmFpbHVyZSBhbmQgYWxsb3cgdXNlcnMgdG8gcmV0cnkuXG4gICAqL1xuICBhbGxvd01hbnVhbFJldHJ5PzogYm9vbGVhbjtcbiAgLyoqXG4gICAqICBWYWxpZCBzb3VyY2VzIGFyZTpcbiAgICogIC0gbG9jYWxfZmlsZV9zeXN0ZW0gLSBEZWZhdWx0XG4gICAqICAtIHVybCAtIERlZmF1bHRcbiAgICogIC0gaW1hZ2VzZWFyY2ggLSBEZWZhdWx0XG4gICAqICAtIGZhY2Vib29rIC0gRGVmYXVsdFxuICAgKiAgLSBpbnN0YWdyYW0gLSBEZWZhdWx0XG4gICAqICAtIGdvb2dsZWRyaXZlIC0gRGVmYXVsdFxuICAgKiAgLSBkcm9wYm94IC0gRGVmYXVsdFxuICAgKiAgLSB3ZWJjYW0gLSBVc2VzIGRldmljZSBtZW51IG9uIG1vYmlsZS4gTm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW4gU2FmYXJpIGFuZCBJRS5cbiAgICogIC0gdmlkZW8gLSBVc2VzIGRldmljZSBtZW51IG9uIG1vYmlsZS4gTm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW4gU2FmYXJpIGFuZCBJRS5cbiAgICogIC0gYXVkaW8gLSBVc2VzIGRldmljZSBtZW51IG9uIG1vYmlsZS4gTm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW4gU2FmYXJpIGFuZCBJRS5cbiAgICogIC0gYm94XG4gICAqICAtIGdpdGh1YlxuICAgKiAgLSBnbWFpbFxuICAgKiAgLSBwaWNhc2FcbiAgICogIC0gb25lZHJpdmVcbiAgICogIC0gb25lZHJpdmVmb3JidXNpbmVzc1xuICAgKiAgLSBjdXN0b21zb3VyY2UgLSBDb25maWd1cmUgdGhpcyBpbiB5b3VyIEZpbGVzdGFjayBEZXYgUG9ydGFsLlxuICAgKi9cbiAgZnJvbVNvdXJjZXM/OiBzdHJpbmdbXTtcbiAgLyoqXG4gICAqIENvbnRhaW5lciB3aGVyZSBwaWNrZXIgc2hvdWxkIGJlIGFwcGVuZGVkLiBPbmx5IHJlbGV2YW50IGZvciBgaW5saW5lYCBhbmQgYGRyb3BQYW5lYCBkaXNwbGF5IG1vZGVzLlxuICAgKi9cbiAgY29udGFpbmVyPzogc3RyaW5nIHwgTm9kZTtcblxuICAvKipcbiAgICogVHVybiBvbiBjbGVhbmluZyBKUEVHIGltYWdlIGV4aWYuIE1ldGhvZCBjYW4ga2VlcCBpbWFnZSBvcmllbnRhdGlvbiBvciBjb2xvciBwcm9maWxlc1xuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIGNsZWFudXBJbWFnZUV4aWY6IHtcbiAgICogICBrZWVwT3JpZW50YXRpb246IHRydWVcbiAgICogICBrZWVwSUNDYW5kQVBQOiB0cnVlXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBjbGVhbnVwSW1hZ2VFeGlmPzogYm9vbGVhbiB8IHtcbiAgICBrZWVwT3JpZW50YXRpb24/OiBib29sZWFuLFxuICAgIGtlZXBJQ0NhbmRBUFA/OiBib29sZWFuXG4gIH07XG4gIC8qKlxuICAgKiBDdXN0b21pemUgdGhlIHRleHQgb24gdGhlIGNsb3VkIGF1dGhlbnRpY2F0aW9uIHNjcmVlbiBpbiBQaWNrZXIuXG4gICAqIFVzZSBhIGNsb3VkIHNvdXJjZSBuYW1lIChzZWUgW1tQaWNrZXJPcHRpb25zLmZyb21Tb3VyY2VzXV0pXG4gICAqIG9yIGEgJ2RlZmF1bHQnIGFzIGEga2V5LCB0aGVuIHB1dCB5b3VyIGN1c3RvbSBub3RpY2Ugb3IgY29uc2VudFxuICAgKiB0byB0aGUgJ3RvcCcgb3IgdGhlICdib3R0b20nIGtleSB0byBzaG93IGl0IHJlc3BlY3Rpdmx5IGFib3ZlIG9yIHVuZGVyICdDb25uZWN0IGJ1dHRvbicuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogY3VzdG9tQXV0aFRleHQ6IHtcbiAgICogICAvLyB1c2UgaXQgZm9yIGV2ZXJ5IGNsb3VkIGF1dGhlbnRpY2F0aW9uIHNjcmVlblxuICAgKiAgIGRlZmF1bHQ6IHtcbiAgICogICAgIHRvcDogW1xuICAgKiAgICAgICAnZGVmYXVsdCB0b3AgZmlyc3QgbGluZScsXG4gICAqICAgICAgICdkZWZhdWx0IHRvcCBzZWNvbmQgbGluZSdcbiAgICogICAgIF0sXG4gICAqICAgICBib3R0b206IFtcbiAgICogICAgICAgJ2RlZmF1bHQgYm90dG9tIGZpcnN0IGxpbmUnLFxuICAgKiAgICAgICAnZGVmYXVsdCBib3R0b20gc2Vjb25kIGxpbmUnXG4gICAqICAgICBdXG4gICAqICAgfSxcbiAgICogICAvLyBvdmVycmlkZSBhIGRlZmF1bHQgYm90dG9tIHRleHQgZm9yIG9ubHkgZ21haWxcbiAgICogICBnbWFpbDoge1xuICAgKiAgICAgYm90dG9tOiBbXG4gICAqICAgICAgICdXZSBuZWVkIHlvdXIgcGVybWlzc2lvbiB0byBhY2Nlc3MgeW91ciBkYXRhIGFuZCcsXG4gICAqICAgICAgICdwcm9jZXNzIGl0IHdpdGggb3VyIG1hY2hpbmUgbGVhcm5pbmcgc3lzdGVtLidcbiAgICogICAgIF1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBjdXN0b21BdXRoVGV4dD86IEN1c3RvbUF1dGhUZXh0T3B0aW9ucztcbiAgLyoqXG4gICAqIFBpY2tlciBkaXNwbGF5IG1vZGUsIG9uZSBvZiBgJ2lubGluZSdgLCBgJ292ZXJsYXknYCwgYCdkcm9wUGFuZSdgIC0gZGVmYXVsdCBpcyBgJ292ZXJsYXknYC5cbiAgICovXG4gIGRpc3BsYXlNb2RlPzogUGlja2VyRGlzcGxheU1vZGU7XG4gIC8qKlxuICAgKiBNYXggbnVtYmVyIG9mIGZpbGVzIHRvIHVwbG9hZCBjb25jdXJyZW50bHkuIERlZmF1bHQgaXMgNC5cbiAgICovXG4gIGNvbmN1cnJlbmN5PzogbnVtYmVyO1xuICAvKipcbiAgICogU2V0IHRoZSBkZWZhdWx0IGNvbnRhaW5lciBmb3IgeW91ciBjdXN0b20gc291cmNlLlxuICAgKi9cbiAgY3VzdG9tU291cmNlQ29udGFpbmVyPzogc3RyaW5nO1xuICAvKipcbiAgICogU2V0IHRoZSBkZWZhdWx0IHBhdGggZm9yIHlvdXIgY3VzdG9tIHNvdXJjZSBjb250YWluZXIuXG4gICAqL1xuICBjdXN0b21Tb3VyY2VQYXRoPzogc3RyaW5nO1xuICAvKipcbiAgICogU2V0IHRoZSBkaXNwbGF5IG5hbWUgZm9yIHRoZSBjdXN0b20gc291cmNlLlxuICAgKi9cbiAgY3VzdG9tU291cmNlTmFtZT86IHN0cmluZztcbiAgLyoqXG4gICAqIFByb3ZpZGUgYW4gb2JqZWN0IGZvciBtYXBwaW5nIHBpY2tlciBzdHJpbmdzIHRvIHlvdXIgb3duIHN0cmluZ3MuXG4gICAqIFN0cmluZ3Mgc3Vycm91bmRlZCBieSBicmFja2V0cywgYHsgZm9vYmFyIH1gLCBhcmUgaW50ZXJwb2xhdGVkIHdpdGggcnVudGltZSB2YWx1ZXMuXG4gICAqIFNvdXJjZSBsYWJlbHMgYXJlIGFsc28gYXZhaWxhYmxlIHRvIG92ZXJyaWRlLCBlLmcuIEZhY2Vib29rLCBJbnN0YWdyYW0sIERyb3Bib3gsIGV0Yy5cbiAgICovXG4gIGN1c3RvbVRleHQ/OiBQaWNrZXJDdXN0b21UZXh0O1xuICAvKipcbiAgICogV2hlbiB0cnVlIHJlbW92ZXMgdGhlIGhhc2ggcHJlZml4IG9uIHN0b3JlZCBmaWxlcy5cbiAgICovXG4gIGRpc2FibGVTdG9yYWdlS2V5PzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFdoZW4gdHJ1ZSByZW1vdmVzIGFiaWxpdHkgdG8gZWRpdCBpbWFnZXMuXG4gICAqL1xuICBkaXNhYmxlVHJhbnNmb3JtZXI/OiBib29sZWFuO1xuICAvKipcbiAgICogRGlzYWJsZXMgbG9jYWwgaW1hZ2UgdGh1bWJuYWlsIHByZXZpZXdzIGluIHRoZSBzdW1tYXJ5IHNjcmVlbi5cbiAgICovXG4gIGRpc2FibGVUaHVtYm5haWxzPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIENvbmZpZ3VyZSB0aGUgZHJvcCBwYW5lIGJlaGF2aW9yLCBpLmUuIHdoZW4gYGRpc3BsYXlNb2RlYCBpcyBgZHJvcFBhbmVgLlxuICAgKi9cbiAgZHJvcFBhbmU/OiBQaWNrZXJEcm9wUGFuZU9wdGlvbnM7XG4gIC8qKlxuICAgKiBXaGVuIHRydWUgdGhlIGBvcmlnaW5hbEZpbGVgIG1ldGFkYXRhIHdpbGwgYmUgdGhlIGFjdHVhbCBgRmlsZWAgb2JqZWN0IGluc3RlYWQgb2YgYSBQT0pPXG4gICAqL1xuICBleHBvc2VPcmlnaW5hbEZpbGU/OiBib29sZWFuO1xuICAvKipcbiAgICogVG9nZ2xlIHRoZSBkcm9wIHpvbmUgdG8gYmUgYWN0aXZlIG9uIGFsbCB2aWV3cy4gRGVmYXVsdCBpcyBhY3RpdmUgb25seSBvbiBsb2NhbCBmaWxlIHNvdXJjZS5cbiAgICovXG4gIGdsb2JhbERyb3Bab25lPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEhpZGUgdGhlIHBpY2tlciBtb2RhbCBVSSBvbmNlIHVwbG9hZGluZyBiZWdpbnMuIERlZmF1bHRzIHRvIGBmYWxzZWAuXG4gICAqL1xuICBoaWRlTW9kYWxXaGVuVXBsb2FkaW5nPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogU3BlY2lmeSBpbWFnZSBkaW1lbnNpb25zLiBlLmcuIFs4MDAsIDYwMF0uIE9ubHkgZm9yIEpQRUcsIFBORywgYW5kIEJNUCBmaWxlcy5cbiAgICogTG9jYWwgYW5kIGNyb3BwZWQgaW1hZ2VzIHdpbGwgYmUgcmVzaXplZCAodXBzY2FsZWQgb3IgZG93bnNjYWxlZCkgdG8gdGhlIHNwZWNpZmllZCBkaW1lbnNpb25zIGJlZm9yZSB1cGxvYWRpbmcuXG4gICAqIFRoZSBvcmlnaW5hbCBoZWlnaHQgdG8gd2lkdGggcmF0aW8gaXMgbWFpbnRhaW5lZC4gVG8gcmVzaXplIGFsbCBpbWFnZXMgYmFzZWQgb24gdGhlIHdpZHRoLCBzZXQgW3dpZHRoLCBudWxsXSwgZS5nLiBbODAwLCBudWxsXS5cbiAgICogRm9yIHRoZSBoZWlnaHQgc2V0IFtudWxsLCBoZWlnaHRdLCBlLmcuIFtudWxsLCA2MDBdLlxuICAgKi9cbiAgaW1hZ2VEaW0/OiBbbnVtYmVyLCBudW1iZXJdO1xuICAvKipcbiAgICogU3BlY2lmeSBtYXhpbXVtIGltYWdlIGRpbWVuc2lvbnMuIGUuZy4gWzgwMCwgNjAwXS4gT25seSBmb3IgSlBFRywgUE5HLCBhbmQgQk1QIGZpbGVzLlxuICAgKiBJbWFnZXMgYmlnZ2VyIHRoYW4gdGhlIHNwZWNpZmllZCBkaW1lbnNpb25zIHdpbGwgYmUgcmVzaXplZCB0byB0aGUgbWF4aW11bSBzaXplIHdoaWxlIG1haW50YWluaW5nIHRoZSBvcmlnaW5hbCBhc3BlY3QgcmF0aW8uXG4gICAqIFRoZSBvdXRwdXQgd2lsbCBub3QgYmUgZXhhY3RseSA4MDB4NjAwIHVubGVzcyB0aGUgaW1hZ2VNYXggbWF0Y2hlcyB0aGUgYXNwZWN0IHJhdGlvIG9mIHRoZSBvcmlnaW5hbCBpbWFnZS5cbiAgICovXG4gIGltYWdlTWF4PzogW251bWJlciwgbnVtYmVyXTtcbiAgLyoqXG4gICAqIFNwZWNpZnkgbWluaW11bSBpbWFnZSBkaW1lbnNpb25zLiBlLmcuIFs4MDAsIDYwMF0uIE9ubHkgZm9yIEpQRUcsIFBORywgYW5kIEJNUCBmaWxlcy5cbiAgICogSW1hZ2VzIHNtYWxsZXIgdGhhbiB0aGUgc3BlY2lmaWVkIGRpbWVuc2lvbnMgd2lsbCBiZSB1cHNjYWxlZCB0byB0aGUgbWluaW11bSBzaXplIHdoaWxlIG1haW50YWluaW5nIHRoZSBvcmlnaW5hbCBhc3BlY3QgcmF0aW8uXG4gICAqIFRoZSBvdXRwdXQgd2lsbCBub3QgYmUgZXhhY3RseSA4MDB4NjAwIHVubGVzcyB0aGUgaW1hZ2VNaW4gbWF0Y2hlcyB0aGUgYXNwZWN0IHJhdGlvIG9mIHRoZSBvcmlnaW5hbCBpbWFnZS5cbiAgICovXG4gIGltYWdlTWluPzogW251bWJlciwgbnVtYmVyXTtcbiAgLyoqXG4gICAqIFNldHMgbG9jYWxlLiBBY2NlcHRzOiBjYSwgZGEsIGRlLCBlbiwgZXMsIGZyLCBoZSwgaXQsIGphLCBrbywgbmwsIG5vLCBwbCwgcHQsIHN2LCBydSwgdmksIHpoLCB0clxuICAgKi9cbiAgbGFuZz86IHN0cmluZztcbiAgLyoqXG4gICAqIE1pbmltdW0gbnVtYmVyIG9mIGZpbGVzIHJlcXVpcmVkIHRvIHN0YXJ0IHVwbG9hZGluZy4gRGVmYXVsdHMgdG8gMS5cbiAgICovXG4gIG1pbkZpbGVzPzogbnVtYmVyO1xuICAvKipcbiAgICogTWF4aW11bSBudW1iZXIgb2YgZmlsZXMgYWxsb3dlZCB0byB1cGxvYWQuIERlZmF1bHRzIHRvIDEuXG4gICAqL1xuICBtYXhGaWxlcz86IG51bWJlcjtcbiAgLyoqXG4gICAqIFJlc3RyaWN0IHNlbGVjdGVkIGZpbGVzIHRvIGEgbWF4aW11bSBudW1iZXIgb2YgYnl0ZXMuIChlLmcuIDEwIFxcKiAxMDI0IFxcKiAxMDI0IGZvciAxME1CIGxpbWl0KS5cbiAgICovXG4gIG1heFNpemU/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIERlZmF1bHQgdmlldyB0eXBlIG9wdGlvbiBmb3IgZmlsZSBicm93c2VyXG4gICAqL1xuICB2aWV3VHlwZT86ICdncmlkJyB8ICdsaXN0JztcblxuICAvKipcbiAgICogVGltZW91dCBmb3IgZXJyb3IgbWVzc2FnZXNcbiAgICovXG4gIGVycm9yc1RpbWVvdXQ/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBTcGVjaWZ5IFt3aWR0aCwgaGVpZ2h0XSBpbiBwaXhlbHMgb2YgdGhlIGRlc2t0b3AgbW9kYWwuXG4gICAqL1xuICBtb2RhbFNpemU/OiBbbnVtYmVyLCBudW1iZXJdO1xuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gYWxsIHVwbG9hZHMgaW4gYSBwaWNrIGFyZSBjYW5jZWxsZWQuXG4gICAqL1xuICBvbkNhbmNlbD86IFBpY2tlclVwbG9hZERvbmVDYWxsYmFjaztcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoZSBVSSBpcyBleGl0ZWQuXG4gICAqL1xuICBvbkNsb3NlPzogKCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoZSBVSSBpcyBtb3VudGVkLlxuICAgKiBAcGFyYW0gUGlja2VySW5zdGFuY2UgYXBwbGljYXRpb24gaGFuZGxlXG4gICAqL1xuICBvbk9wZW4/OiAoaGFuZGxlOiBQaWNrZXJJbnN0YW5jZSkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuZXZlciB1c2VyIHNlbGVjdHMgYSBmaWxlLlxuICAgKiAjIyMgRXhhbXBsZVxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAvLyBVc2luZyB0byB2ZXRvIGZpbGUgc2VsZWN0aW9uXG4gICAqIC8vIElmIHlvdSB0aHJvdyBhbnkgZXJyb3IgaW4gdGhpcyBmdW5jdGlvbiBpdCB3aWxsIHJlamVjdCB0aGUgZmlsZSBzZWxlY3Rpb24uXG4gICAqIC8vIFRoZSBlcnJvciBtZXNzYWdlIHdpbGwgYmUgZGlzcGxheWVkIHRvIHRoZSB1c2VyIGFzIGFuIGFsZXJ0LlxuICAgKiBvbkZpbGVTZWxlY3RlZChmaWxlKSB7XG4gICAqICAgaWYgKGZpbGUuc2l6ZSA+IDEwMDAgKiAxMDAwKSB7XG4gICAqICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpbGUgdG9vIGJpZywgc2VsZWN0IHNvbWV0aGluZyBzbWFsbGVyIHRoYW4gMU1CJyk7XG4gICAqICAgfVxuICAgKiB9XG4gICAqXG4gICAqIC8vIFVzaW5nIHRvIGNoYW5nZSBzZWxlY3RlZCBmaWxlIG5hbWVcbiAgICogLy8gTk9URTogVGhpcyBjdXJyZW50bHkgb25seSB3b3JrcyBmb3IgbG9jYWwgdXBsb2Fkc1xuICAgKiBvbkZpbGVTZWxlY3RlZChmaWxlKSB7XG4gICAqICAgLy8gSXQncyBpbXBvcnRhbnQgdG8gcmV0dXJuIGEgbmV3IGZpbGUgYnkgdGhlIGVuZCBvZiB0aGlzIGZ1bmN0aW9uLlxuICAgKiAgIHJldHVybiB7IC4uLmZpbGUsIG5hbWU6ICdmb28nIH07XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFRoZSBjYWxsYmFjayBmdW5jdGlvbiBjYW4gYWxzbyByZXR1cm4gYSBQcm9taXNlIHRvIGFsbG93IGFzeW5jaHJvbm91cyB2YWxpZGF0aW9uIGxvZ2ljLlxuICAgKiBZb3UgY2FuIHBhc3MgYSBmaWxlIG9iamVjdCB0byBgcmVzb2x2ZWAgZm9yIGNoYW5naW5nIHRoZSBmaWxlIG5hbWUsIGl0IHdpbGwgYmVoYXZlIHRoZSBzYW1lIGFzIHdoZW5cbiAgICogdGhlIGZpbGUgaXMgcmV0dXJuZWQgZnJvbSB0aGUgbm9uLWFzeW5jIGNhbGxiYWNrLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBvbkZpbGVTZWxlY3RlZChmaWxlKSB7XG4gICAqICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICogICAgIC8vIERvIHNvbWV0aGluZyBhc3luY1xuICAgKiAgICAgcmVzb2x2ZSgpO1xuICAgKiAgICAgLy8gT3IgcmVqZWN0IHRoZSBzZWxlY3Rpb24gd2l0aCByZWplY3QoKVxuICAgKiAgIH0pO1xuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgb25GaWxlU2VsZWN0ZWQ/OiBQaWNrZXJGaWxlQ2FsbGJhY2s7XG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIGZpbGUgYmVnaW5zIHVwbG9hZGluZy5cbiAgICovXG4gIG9uRmlsZVVwbG9hZFN0YXJ0ZWQ/OiBQaWNrZXJGaWxlQ2FsbGJhY2s7XG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIGZpbGUgaXMgZG9uZSB1cGxvYWRpbmcuXG4gICAqL1xuICBvbkZpbGVVcGxvYWRGaW5pc2hlZD86IFBpY2tlckZpbGVDYWxsYmFjaztcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHVwbG9hZGluZyBhIGZpbGUgZmFpbHMuXG4gICAqL1xuICBvbkZpbGVVcGxvYWRGYWlsZWQ/OiBQaWNrZXJGaWxlRXJyb3JDYWxsYmFjaztcbiAgLyoqXG4gICAqIENhbGxlZCBkdXJpbmcgbXVsdGktcGFydCB1cGxvYWQgcHJvZ3Jlc3MgZXZlbnRzLiBMb2NhbCBmaWxlcyBvbmx5LlxuICAgKi9cbiAgb25GaWxlVXBsb2FkUHJvZ3Jlc3M/OiBQaWNrZXJGaWxlUHJvZ3Jlc3NDYWxsYmFjaztcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGZpbGUgaXMgY3JvcHBlZCBpbiBwaWNrZXJcbiAgICovXG4gIG9uRmlsZUNyb3BwZWQ/OiBQaWNrZXJGaWxlQ2FsbGJhY2s7XG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB1cGxvYWRpbmcgc3RhcnRzICh1c2VyIGluaXRpYXRlcyB1cGxvYWRpbmcpLlxuICAgKi9cbiAgb25VcGxvYWRTdGFydGVkPzogUGlja2VyVXBsb2FkU3RhcnRlZENhbGxiYWNrO1xuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gYWxsIGZpbGVzIGhhdmUgYmVlbiB1cGxvYWRlZC5cbiAgICovXG4gIG9uVXBsb2FkRG9uZT86IFBpY2tlclVwbG9hZERvbmVDYWxsYmFjaztcblxuICAvKipcbiAgICogRGVmaW5lIGEgdW5pcXVlIGlkIGZvciB0aGUgYXBwbGljYXRpb24gbW91bnQgcG9pbnQuXG4gICAqIE1heSBiZSB1c2VmdWwgZm9yIG1vcmUgYWR2YW5jZWQgdXNlIGNhc2VzLlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgeW91IHdpc2ggdG8gaGF2ZSBtb3JlIHRoYW4gb25lIHBpY2tlciBpbnN0YW5jZSBvcGVuIGF0IG9uY2UsXG4gICAqIHRoZW4gZWFjaCB3aWxsIG5lZWQgdGhlaXIgb3duIHVuaXF1ZSByb290SWQuXG4gICAqXG4gICAqICoqTm90ZToqKiBUaGlzIG9wdGlvbiBpcyBpZ25vcmVkIHdoZW4gYGRpc3BsYXlNb2RlYCBpcyBgZHJvcFBhbmVgLlxuICAgKi9cbiAgcm9vdElkPzogc3RyaW5nO1xuICAvKipcbiAgICogV2hldGhlciB0byBzdGFydCB1cGxvYWRpbmcgYXV0b21hdGljYWxseSB3aGVuIG1heEZpbGVzIGlzIGhpdC4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAgICovXG4gIHN0YXJ0VXBsb2FkaW5nV2hlbk1heEZpbGVzUmVhY2hlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBPcHRpb25zIGZvciBmaWxlIHN0b3JhZ2UuXG4gICAqL1xuICBzdG9yZVRvPzogUGlja2VyU3RvcmVPcHRpb25zO1xuICAvKipcbiAgICogU3BlY2lmeSBvcHRpb25zIGZvciBpbWFnZXMgcGFzc2VkIHRvIHRoZSBjcm9wIFVJLlxuICAgKi9cbiAgdHJhbnNmb3JtYXRpb25zPzogUGlja2VyVHJhbnNmb3JtYXRpb25PcHRpb25zO1xuICAvKipcbiAgICogT3B0aW9ucyBmb3IgbG9jYWwgZmlsZSB1cGxvYWRzLlxuICAgKi9cbiAgdXBsb2FkQ29uZmlnPzogVXBsb2FkT3B0aW9ucztcbiAgLyoqXG4gICAqIFN0YXJ0IHVwbG9hZGluZyBpbW1lZGlhdGVseSBvbiBmaWxlIHNlbGVjdGlvbi4gRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgKiBAaW1wb3J0YW50IFRoZSBmZWF0dXJlIGlzIGNhbiBiZSBlbmFibGVkIG9ubHkgaWYgY3JvcCBpcyBkaXNhYmxlZCAtIGRpc2FibGVUcmFuc2Zvcm1lcjogdHJ1ZVxuICAgKi9cbiAgdXBsb2FkSW5CYWNrZ3JvdW5kPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFNldHMgdGhlIHJlc29sdXRpb24gb2YgcmVjb3JkZWQgdmlkZW8uIE9uZSBvZiBcIjMyMHgyNDBcIiwgXCI2NDB4NDgwXCIgb3IgXCIxMjgweDcyMFwiLiBEZWZhdWx0IGlzIGBcIjY0MHg0ODBcImAuXG4gICAqL1xuICB2aWRlb1Jlc29sdXRpb24/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBVc2UgU2VudHJ5IEJyZWFkY3J1bWJzIG1lY2hhbmlzbSB0byBsb2cgaW5mb3JtYXRpb24gYWJvdXQgb2NjdXJlZCBlcnJvcnMuXG4gICAqIEl0IGNhbiBvdmVycmlkZSBnbG9iYWwgb2JqZWN0cyBsaWtlIGNvbnNvbGUsIGVycm9yIGV0Yy4gRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgKi9cbiAgdXNlU2VudHJ5QnJlYWRjcnVtYnM/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBpY2tlckNyb3BPcHRpb25zIHtcbiAgLyoqXG4gICAqIE1haW50YWluIGFzcGVjdCByYXRpbyBmb3IgY3JvcCBzZWxlY3Rpb24uIChlLmcuIDE2LzksIDgwMC82MDApLlxuICAgKi9cbiAgYXNwZWN0UmF0aW8/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBGb3JjZSBhbGwgaW1hZ2VzIHRvIGJlIGNyb3BwZWQgYmVmb3JlIHVwbG9hZGluZy5cbiAgICovXG4gIGZvcmNlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQaWNrZXJUcmFuc2Zvcm1hdGlvbk9wdGlvbnMge1xuICAvKipcbiAgICogRW5hYmxlIGNyb3AuIERlZmF1bHRzIHRvIGB0cnVlYC5cbiAgICovXG4gIGNyb3A/OiBib29sZWFuIHwgUGlja2VyQ3JvcE9wdGlvbnM7XG4gIC8qKlxuICAgKiBFbmFibGUgY2lyY2xlIGNyb3AuIERpc2FibGVkIGlmIGNyb3AuYXNwZWN0UmF0aW8gaXMgZGVmaW5lZCBhbmQgbm90IDEuIENvbnZlcnRzIHRvIFBORy4gRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgKi9cbiAgY2lyY2xlPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEVuYWJsZSBpbWFnZSByb3RhdGlvbi4gRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgKi9cbiAgcm90YXRlPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogR2xvYmFsIGZvcmNlIGNyb3Agb3B0aW9uLiBDYW4gYmUgdXNlIGllIHdpdGggY2lyY2xlXG4gICAqL1xuICBmb3JjZT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEEgc3luY2hyb25vdXMtbG9va2luZyB3cmFwcGVyIGZvciBsb2FkaW5nIHRoZSBwaWNrZXIgYW5kIGNhbGxpbmcgaXRzIG1ldGhvZHMuXG4gKiBUaGlzIGlzIGN1cnJlbnRseSBuZWVkZWQgYmVjYXVzZSB0aGUgcGlja2VyIG1vZHVsZSBpcyBsb2FkZWQgYXN5bmNocm9ub3VzbHkuXG4gKiBFdmVudHVhbGx5IHdlIHNob3VsZCBvZmZlciBhIGJ1bmRsZSB3aXRoIHRoZSBwaWNrZXIgbW9kdWxlIGluY2x1ZGVkLlxuICovXG5jbGFzcyBQaWNrZXJMb2FkZXIge1xuXG4gIHByaXZhdGUgX2luaXRpYWxpemVkOiBQcm9taXNlPFBpY2tlckluc3RhbmNlPjtcblxuICBjb25zdHJ1Y3RvcihjbGllbnQ6IENsaWVudCwgb3B0aW9ucz86IFBpY2tlck9wdGlvbnMpIHtcbiAgICBjb25zdCB2YWxpZGF0ZVJlcyA9IGdldFZhbGlkYXRvcihQaWNrZXJQYXJhbXNTY2hlbWEpKG9wdGlvbnMpO1xuICAgIGlmICh2YWxpZGF0ZVJlcy5lcnJvcnMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRmlsZXN0YWNrRXJyb3IoYEludmFsaWQgcGlja2VyIHBhcmFtc2AsIHZhbGlkYXRlUmVzLmVycm9ycywgRmlsZXN0YWNrRXJyb3JUeXBlLlZBTElEQVRJT04pO1xuICAgIH1cblxuICAgIHRoaXMuX2luaXRpYWxpemVkID0gdGhpcy5sb2FkTW9kdWxlKGNsaWVudCwgb3B0aW9ucyk7XG4gIH1cblxuICBhc3luYyBvcGVuKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHBpY2tlciA9IGF3YWl0IHRoaXMuX2luaXRpYWxpemVkO1xuICAgIGF3YWl0IHBpY2tlci5vcGVuKCk7XG4gIH1cblxuICBhc3luYyBjcm9wKGZpbGVzOiBhbnlbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHBpY2tlciA9IGF3YWl0IHRoaXMuX2luaXRpYWxpemVkO1xuICAgIGF3YWl0IHBpY2tlci5jcm9wKGZpbGVzKTtcbiAgfVxuXG4gIGFzeW5jIGNsb3NlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHBpY2tlciA9IGF3YWl0IHRoaXMuX2luaXRpYWxpemVkO1xuICAgIGF3YWl0IHBpY2tlci5jbG9zZSgpO1xuICB9XG5cbiAgYXN5bmMgY2FuY2VsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHBpY2tlciA9IGF3YWl0IHRoaXMuX2luaXRpYWxpemVkO1xuICAgIGF3YWl0IHBpY2tlci5jYW5jZWwoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZE1vZHVsZShjbGllbnQ6IENsaWVudCwgb3B0aW9ucz86IFBpY2tlck9wdGlvbnMpOiBQcm9taXNlPFBpY2tlckluc3RhbmNlPiB7XG4gICAgY29uc3QgeyBzZXNzaW9uOiB7IHVybHM6IHsgcGlja2VyVXJsOiB1cmwgfSB9IH0gPSBjbGllbnQ7XG4gICAgY29uc3QgUGlja2VyID0gYXdhaXQgbG9hZE1vZHVsZSh1cmwsIGtub3duTW9kdWxlSWRzLnBpY2tlcik7XG4gICAgcmV0dXJuIG5ldyBQaWNrZXIoY2xpZW50LCBvcHRpb25zKTtcbiAgfVxufVxuXG4vKipcbiAqIExvYWRzIGFuZCBjcmVhdGVzIHBpY2tlciBpbnN0YW5jZVxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0gY2xpZW50XG4gKiBAcGFyYW0gb3B0aW9uc1xuICovXG5leHBvcnQgY29uc3QgcGlja2VyID0gKGNsaWVudDogQ2xpZW50LCBvcHRpb25zPzogUGlja2VyT3B0aW9ucyk6IFBpY2tlckluc3RhbmNlID0+IHtcbiAgcmV0dXJuIG5ldyBQaWNrZXJMb2FkZXIoY2xpZW50LCBvcHRpb25zKTtcbn07XG4iXX0=
