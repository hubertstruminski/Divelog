{"ast":null,"code":"var _jsxFileName = \"/home/huber/Pulpit/Divelog/reactapp/src/components/LogIn.js\";\nimport React from 'react';\nimport '../css/LogIn.css';\nimport logo from '../img/logo.png';\nimport { withTranslation } from 'react-i18next';\nimport FacebookLogin from 'react-facebook-login';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport { AuthObject } from '../util/AuthObject';\nimport AuthService from '../util/AuthService';\nimport $ from 'jquery';\nimport TwitterLogin from 'react-twitter-auth';\n\nclass LogIn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirectToReferrer: false\n    };\n    this.Auth = new AuthService();\n    this.responseFacebook = this.responseFacebook.bind(this);\n    this.onTwitterClick = this.onTwitterClick.bind(this);\n    this.onFailed = this.onFailed.bind(this);\n    this.onSuccess = this.onSuccess.bind(this);\n  }\n\n  componentDidMount() {\n    $(\"nav\").css({\n      \"position\": \"fixed\",\n      \"width\": \"100%\"\n    });\n  }\n\n  componentWillUnmount() {\n    $(\"nav\").css({\n      \"position\": \"static\"\n    });\n  }\n\n  responseFacebook(response) {\n    const loginRequest = {\n      accessToken: response[\"accessToken\"],\n      email: response[\"email\"],\n      name: response[\"name\"],\n      userID: response[\"userID\"],\n      pictureUrl: response[\"picture\"][\"data\"][\"url\"]\n    };\n    axios({\n      method: 'POST',\n      url: '/signin',\n      data: loginRequest,\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-type\": \"application/json\"\n      }\n    }).then(response => {\n      this.Auth.setToken(response[\"data\"]);\n    });\n    AuthObject.authenticate(() => {\n      this.setState(() => ({\n        redirectToReferrer: true\n      }));\n    });\n    AuthObject.setPrincipal(loginRequest);\n    return React.createElement(Redirect, {\n      to: \"/dashboard/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    });\n  }\n\n  onFailed(response) {\n    console.log(response);\n  }\n\n  onSuccess(response) {\n    console.log(response);\n    response.json().then(body => {\n      alert(JSON.stringify(body));\n    });\n  }\n\n  onTwitterClick() {\n    window.location.href = \"http://divelog.us-east-1.elasticbeanstalk.com/signin/twitter\";\n  }\n\n  render() {\n    const _ref = this.props.location.state || {\n      from: {\n        pathname: '/dashboard'\n      }\n    },\n          from = _ref.from;\n\n    const redirectToReferrer = this.state.redirectToReferrer;\n\n    if (redirectToReferrer === true) {\n      return React.createElement(Redirect, {\n        to: from,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"login-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"login-form-container form-container-shadow form-size\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"logo-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, this.props.t(\"login.login\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: logo,\n      alt: \"divelog\",\n      className: \"logo-space logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"logo-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Divelog\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), \"Hubert Strumi\\u0144ski\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(FacebookLogin, {\n      appId: \"455695445269575\",\n      autoLoad: false,\n      fields: \"name,email,picture\",\n      scope: \"public_profile,user_friends\",\n      callback: this.responseFacebook,\n      cssClass: \"btn btn-lg btn-fb fb-btn-white-font\",\n      icon: \"<i className='fab fa-facebook-f pr-1' />\",\n      textButton: this.props.t(\"login.facebook-btn\"),\n      installed: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-tw fb-btn-white-font btn-tw-background btn-tw-width\",\n      onClick: this.onTwitterClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"fab fa-twitter pr-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), \"LOGIN WITH TWITTER\"), React.createElement(TwitterLogin // loginUrl=\"http://divelog.com.s3-website-us-east-1.amazonaws.com/signin/twitter\"\n    , {\n      loginUrl: \"http://127.0.0.1/signin/twitter\",\n      onFailure: this.onFailed,\n      onSuccess: this.onSuccess // requestTokenUrl=\"http://divelog.com.s3-website-us-east-1.amazonaws.com/callback\"\n      ,\n      requestTokenUrl: \"http://127.0.0.1/callback\",\n      customHeaders: {\n        'Access-Control-Allow-Origin': \"*\",\n        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS, DELETE, PUT',\n        origin: true,\n        methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n        credentials: true,\n        exposedHeaders: ['x-auth-token']\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default withTranslation('common')(LogIn);","map":{"version":3,"sources":["/home/huber/Pulpit/Divelog/reactapp/src/components/LogIn.js"],"names":["React","logo","withTranslation","FacebookLogin","axios","Redirect","AuthObject","AuthService","$","TwitterLogin","LogIn","Component","constructor","props","state","redirectToReferrer","Auth","responseFacebook","bind","onTwitterClick","onFailed","onSuccess","componentDidMount","css","componentWillUnmount","response","loginRequest","accessToken","email","name","userID","pictureUrl","method","url","data","headers","then","setToken","authenticate","setState","setPrincipal","console","log","json","body","alert","JSON","stringify","window","location","href","render","from","pathname","t","origin","methods","credentials","exposedHeaders"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../css/LogIn.css';\nimport logo from '../img/logo.png';\nimport { withTranslation } from 'react-i18next';\nimport FacebookLogin from 'react-facebook-login';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport { AuthObject } from '../util/AuthObject';\nimport AuthService from '../util/AuthService';\nimport $ from 'jquery';\nimport TwitterLogin from 'react-twitter-auth';\n\nclass LogIn extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirectToReferrer: false\n        }\n        this.Auth = new AuthService();\n        this.responseFacebook = this.responseFacebook.bind(this);\n        this.onTwitterClick = this.onTwitterClick.bind(this);\n        this.onFailed = this.onFailed.bind(this);\n        this.onSuccess = this.onSuccess.bind(this);\n    }\n\n    componentDidMount() {\n        $(\"nav\").css({ \"position\": \"fixed\", \"width\": \"100%\"});\n    }\n\n    componentWillUnmount() {\n        $(\"nav\").css({ \"position\": \"static\"});\n    }\n\n    responseFacebook(response) {\n        const loginRequest = {\n            accessToken: response[\"accessToken\"],\n            email: response[\"email\"],\n            name: response[\"name\"],\n            userID: response[\"userID\"],\n            pictureUrl: response[\"picture\"][\"data\"][\"url\"]\n        }\n\n        axios({\n            method: 'POST',\n            url: '/signin',\n            data: loginRequest,\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-type\": \"application/json\"\n            }\n        }).then(response => {\n            this.Auth.setToken(response[\"data\"]);\n        });\n\n        AuthObject.authenticate(() => {\n            this.setState(() => ({redirectToReferrer: true }));\n        })\n        AuthObject.setPrincipal(loginRequest);\n\n        return <Redirect to=\"/dashboard/\" />\n    }\n\n    onFailed(response) {\n        console.log(response);\n    }\n\n    onSuccess(response) {\n        console.log(response);\n        response.json().then(body => {\n            alert(JSON.stringify(body));\n          });\n    }\n\n    onTwitterClick() {\n        window.location.href = \"http://divelog.us-east-1.elasticbeanstalk.com/signin/twitter\";\n    }\n\n    render() {\n        const { from } = this.props.location.state || { from: { pathname: '/dashboard' }}\n        const { redirectToReferrer } = this.state;\n\n        if(redirectToReferrer === true) {\n            return <Redirect to={from} />\n        }\n\n        return(\n            <div className=\"login-container\">\n                <div className=\"login-form-container form-container-shadow form-size\">\n                    <div>\n                        <span className=\"logo-text\">\n                            {this.props.t(\"login.login\")}\n                        </span>\n                        <br />\n                        <img src={logo} alt=\"divelog\" className=\"logo-space logo\" />\n                        <br />\n                        <span className=\"logo-text\">Divelog</span>\n                        <br />\n                        Hubert Strumiński\n                        <br />\n                        <FacebookLogin\n                            appId=\"455695445269575\"\n                            autoLoad={false}\n                            fields=\"name,email,picture\"\n                            scope=\"public_profile,user_friends\"\n                            callback={this.responseFacebook}\n                            cssClass=\"btn btn-lg btn-fb fb-btn-white-font\"\n                            icon=\"<i className='fab fa-facebook-f pr-1' />\"\n                            textButton={this.props.t(\"login.facebook-btn\")}\n                            installed={true}\n                        />\n                        <br />\n                        <button \n                            type=\"button\" \n                            className=\"btn btn-tw fb-btn-white-font btn-tw-background btn-tw-width\"\n                            onClick={this.onTwitterClick}\n                        >\n                            <i class=\"fab fa-twitter pr-1\"></i> \n                            LOGIN WITH TWITTER\n                        </button>\n                        <TwitterLogin \n                            // loginUrl=\"http://divelog.com.s3-website-us-east-1.amazonaws.com/signin/twitter\"\n                            loginUrl=\"http://127.0.0.1/signin/twitter\"\n                            onFailure={this.onFailed}\n                            onSuccess={this.onSuccess}\n                            // requestTokenUrl=\"http://divelog.com.s3-website-us-east-1.amazonaws.com/callback\"\n                            requestTokenUrl=\"http://127.0.0.1/callback\"\n                            customHeaders={{\n                                'Access-Control-Allow-Origin': \"*\",\n                                'Access-Control-Allow-Methods': 'GET, POST, OPTIONS, DELETE, PUT',\n                                origin: true,\n                                methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n                                credentials: true,\n                                exposedHeaders: ['x-auth-token']\n                            }}\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withTranslation('common')(LogIn);"]},"metadata":{},"sourceType":"module"}