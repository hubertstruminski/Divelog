{"ast":null,"code":"var _jsxFileName = \"/home/huber/Pulpit/divelog/react-divelog/src/components/LogIn.js\";\nimport React from 'react';\nimport '../css/LogIn.css';\nimport logo from '../img/logo.png';\nimport { withTranslation } from 'react-i18next';\nimport FacebookLogin from 'react-facebook-login';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport { AuthObject } from '../util/AuthObject';\nimport AuthService from '../util/AuthService';\nimport $ from 'jquery';\nimport TwitterLogin from 'react-twitter-auth';\n\nclass LogIn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirectToReferrer: false\n    };\n    this.Auth = new AuthService();\n    this.responseFacebook = this.responseFacebook.bind(this);\n    this.onTwitterClick = this.onTwitterClick.bind(this);\n    this.onReactTwitterLogin = this.onReactTwitterLogin.bind(this);\n  }\n\n  componentDidMount() {\n    $(\"nav\").css({\n      \"position\": \"fixed\",\n      \"width\": \"100%\"\n    });\n  }\n\n  componentWillUnmount() {\n    $(\"nav\").css({\n      \"position\": \"static\"\n    });\n  }\n\n  responseFacebook(response) {\n    const loginRequest = {\n      accessToken: response[\"accessToken\"],\n      email: response[\"email\"],\n      name: response[\"name\"],\n      userID: response[\"userID\"],\n      pictureUrl: response[\"picture\"][\"data\"][\"url\"]\n    };\n    axios({\n      method: 'POST',\n      url: '/signin',\n      data: loginRequest,\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-type\": \"application/json\"\n      }\n    }).then(response => {\n      this.Auth.setToken(response[\"data\"]);\n    });\n    AuthObject.authenticate(() => {\n      this.setState(() => ({\n        redirectToReferrer: true\n      }));\n    });\n    AuthObject.setPrincipal(loginRequest);\n    return React.createElement(Redirect, {\n      to: \"/dashboard/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    });\n  } // onSuccess(response) {\n  //     console.log(response);\n  // }\n\n\n  onTwitterClick() {\n    fetch(\"/connect/twitter\", {\n      method: 'GET'\n    }).then(response => response.json()).then(jsonData => {\n      console.log(jsonData);\n    });\n  }\n\n  onReactTwitterLogin() {\n    fetch(\"https://api.twitter.com/oauth/authorize\", {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'content-type': 'application/json'\n      }\n    }).then(r => r.json()).then(jsonData => {\n      console.log(jsonData);\n    });\n  }\n\n  render() {\n    const _ref = this.props.location.state || {\n      from: {\n        pathname: '/dashboard'\n      }\n    },\n          from = _ref.from;\n\n    const redirectToReferrer = this.state.redirectToReferrer;\n\n    if (redirectToReferrer === true) {\n      return React.createElement(Redirect, {\n        to: from,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"login-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"login-form-container form-container-shadow form-size\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"logo-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, this.props.t(\"login.login\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: logo,\n      alt: \"divelog\",\n      className: \"logo-space logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"logo-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Divelog\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(FacebookLogin, {\n      appId: \"455695445269575\",\n      autoLoad: false,\n      fields: \"name,email,picture\",\n      scope: \"public_profile,user_friends\",\n      callback: this.responseFacebook,\n      cssClass: \"btn btn-lg btn-fb fb-btn-white-font\",\n      icon: \"<i className='fab fa-facebook-f pr-1' />\",\n      textButton: this.props.t(\"login.facebook-btn\"),\n      installed: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: this.onTwitterClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"LOGIN WITH TWITTER\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      onClick: this.onReactTwitterLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"REACT TWITTER\"))));\n  }\n\n}\n\nexport default withTranslation('common')(LogIn);","map":{"version":3,"sources":["/home/huber/Pulpit/divelog/react-divelog/src/components/LogIn.js"],"names":["React","logo","withTranslation","FacebookLogin","axios","Redirect","AuthObject","AuthService","$","TwitterLogin","LogIn","Component","constructor","props","state","redirectToReferrer","Auth","responseFacebook","bind","onTwitterClick","onReactTwitterLogin","componentDidMount","css","componentWillUnmount","response","loginRequest","accessToken","email","name","userID","pictureUrl","method","url","data","headers","then","setToken","authenticate","setState","setPrincipal","fetch","json","jsonData","console","log","r","render","location","from","pathname","t"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../css/LogIn.css';\nimport logo from '../img/logo.png';\nimport { withTranslation } from 'react-i18next';\nimport FacebookLogin from 'react-facebook-login';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport { AuthObject } from '../util/AuthObject';\nimport AuthService from '../util/AuthService';\nimport $ from 'jquery';\nimport TwitterLogin from 'react-twitter-auth';\n\nclass LogIn extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirectToReferrer: false\n        }\n        this.Auth = new AuthService();\n        this.responseFacebook = this.responseFacebook.bind(this);\n        this.onTwitterClick = this.onTwitterClick.bind(this);\n        this.onReactTwitterLogin = this.onReactTwitterLogin.bind(this);\n    }\n\n    componentDidMount() {\n        $(\"nav\").css({ \"position\": \"fixed\", \"width\": \"100%\"});\n    }\n\n    componentWillUnmount() {\n        $(\"nav\").css({ \"position\": \"static\"});\n    }\n\n    responseFacebook(response) {\n        const loginRequest = {\n            accessToken: response[\"accessToken\"],\n            email: response[\"email\"],\n            name: response[\"name\"],\n            userID: response[\"userID\"],\n            pictureUrl: response[\"picture\"][\"data\"][\"url\"]\n        }\n\n        axios({\n            method: 'POST',\n            url: '/signin',\n            data: loginRequest,\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-type\": \"application/json\"\n            }\n        }).then(response => {\n            this.Auth.setToken(response[\"data\"]);\n        });\n\n        AuthObject.authenticate(() => {\n            this.setState(() => ({redirectToReferrer: true }));\n        })\n        AuthObject.setPrincipal(loginRequest);\n\n        return <Redirect to=\"/dashboard/\" />\n    }\n\n    // onSuccess(response) {\n    //     console.log(response);\n    // }\n\n    onTwitterClick() {\n        fetch(\"/connect/twitter\", {\n            method: 'GET'\n        }).then(response => response.json())\n        .then(jsonData => {\n            console.log(jsonData);\n        });\n    }\n\n    onReactTwitterLogin() {\n        fetch(\"https://api.twitter.com/oauth/authorize\", {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'content-type': 'application/json'\n            }\n        }).then(r => r.json())\n        .then(jsonData => {\n            console.log(jsonData);\n        });\n    }\n\n    render() {\n        const { from } = this.props.location.state || { from: { pathname: '/dashboard' }}\n        const { redirectToReferrer } = this.state;\n\n        if(redirectToReferrer === true) {\n            return <Redirect to={from} />\n        }\n\n        return(\n            <div className=\"login-container\">\n                <div className=\"login-form-container form-container-shadow form-size\">\n                    <div>\n                        <span className=\"logo-text\">\n                            {this.props.t(\"login.login\")}\n                        </span>\n                        <br />\n                        <img src={logo} alt=\"divelog\" className=\"logo-space logo\" />\n                        <br />\n                        <span className=\"logo-text\">Divelog</span>\n                        <br />\n                        <br />\n                        <FacebookLogin\n                            appId=\"455695445269575\"\n                            autoLoad={false}\n                            fields=\"name,email,picture\"\n                            scope=\"public_profile,user_friends\"\n                            callback={this.responseFacebook}\n                            cssClass=\"btn btn-lg btn-fb fb-btn-white-font\"\n                            icon=\"<i className='fab fa-facebook-f pr-1' />\"\n                            textButton={this.props.t(\"login.facebook-btn\")}\n                            installed={true}\n                        />\n                        <br />\n                        {/* <TwitterLogin\n                            loginUrl=\"http://localhost:3000/api/v1/auth/twitter\"\n                            onFailure={this.onFailed}\n                            onSuccess={this.onSuccess}\n                            requestTokenUrl=\"http://localhost:3000/api/v1/auth/twitter/reverse\"\n                        /> */}\n                        <button className=\"btn btn-primary\" onClick={this.onTwitterClick}>\n                            LOGIN WITH TWITTER\n                        </button>\n                        <br />\n                        <button className=\"btn btn-success\" onClick={this.onReactTwitterLogin}>REACT TWITTER</button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withTranslation('common')(LogIn);"]},"metadata":{},"sourceType":"module"}