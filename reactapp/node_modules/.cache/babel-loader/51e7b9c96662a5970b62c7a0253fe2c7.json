{"ast":null,"code":"var _jsxFileName = \"/home/huber/Pulpit/divelog/frontend/src/components/forum/Forum.js\";\nimport React from 'react';\nimport '../../css/Forum.css';\nimport poland from '../../img/flags/poland.jpg';\nimport germany from '../../img/flags/germany.png';\nimport england from '../../img/flags/england.jpg';\nimport $ from 'jquery';\nimport { Link } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport Topic from './Topic';\nimport ConvertTime from '../../util/ConvertTime';\nimport TopTopics from './TopTopics';\nimport forumDiver from '../../img/forum-diver-blue.png';\nimport { withRouter } from 'react-router';\nimport { withTranslation } from 'react-i18next';\n\nclass Forum extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedForum: '',\n      isEnglishForum: false,\n      isPolishForum: false,\n      isGermanyForum: false,\n      englishTopics: [],\n      polishTopics: [],\n      germanyTopics: [],\n      isTopEnglishForum: false,\n      isTopPolishForum: false,\n      isTopGermanyForum: false,\n      topEnglishTopics: [],\n      topPolishTopics: [],\n      topGermanyTopics: [],\n      isGermanyFive: false,\n      isPolishFive: false,\n      isEnglishFive: false,\n      isLeft: false\n    };\n    this.ConvertTime = new ConvertTime();\n    this.onFlagClick = this.onFlagClick.bind(this);\n    this.onCreateTopicClick = this.onCreateTopicClick.bind(this);\n    this.generatePolishTopics = this.generatePolishTopics.bind(this);\n    this.setTopEnglishFive = this.setTopEnglishFive.bind(this);\n    this.setTopGermanyFive = this.setTopGermanyFive.bind(this);\n    this.setTopPolishFive = this.setTopPolishFive.bind(this);\n  }\n\n  componentDidMount() {\n    fetch(\"/get/topics/all\", {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'content-type': 'application/json'\n      }\n    }).then(response => response.json()).then(jsonData => {\n      let countPolish = 0;\n      let countGermany = 0;\n      let countEnglish = 0;\n      jsonData.map((topic, index) => {\n        if (topic.languageForum === 'polish') {\n          let time = this.ConvertTime.convertTime(topic.createdAt, null, false);\n          const element = {\n            id: topic.id,\n            title: topic.title,\n            createdAt: time[0],\n            owner: topic.user.name,\n            countPolish: countPolish\n          };\n          this.setState({\n            polishTopics: this.state.polishTopics.concat(element)\n          });\n          countPolish++;\n        }\n\n        if (topic.languageForum === 'english') {\n          let time = this.ConvertTime.convertTime(topic.createdAt, null, false);\n          const element = {\n            id: topic.id,\n            title: topic.title,\n            createdAt: time[0],\n            owner: topic.user.name,\n            countEnglish: countEnglish\n          };\n          this.setState({\n            englishTopics: this.state.englishTopics.concat(element)\n          });\n          countEnglish++;\n        }\n\n        if (topic.languageForum === 'germany') {\n          let time = this.ConvertTime.convertTime(topic.createdAt, null, false);\n          const element = {\n            id: topic.id,\n            title: topic.title,\n            createdAt: time[0],\n            owner: topic.user.name,\n            countGermany: countGermany\n          };\n          this.setState({\n            germanyTopics: this.state.germanyTopics.concat(element)\n          });\n          countGermany++;\n        }\n      });\n      this.setState({\n        isLeft: true\n      });\n    });\n  }\n\n  onFlagClick(e) {\n    e.preventDefault();\n    $(\"#polandFlag\").click(() => {\n      this.setState({\n        selectedForum: 'polish',\n        isPolishForum: true,\n        isEnglishForum: false,\n        isGermanyForum: false,\n        isTopPolishForum: true,\n        isTopEnglishForum: false,\n        isTopGermanyForum: false\n      }, () => {\n        $(\"#polandFlag\").addClass(\"isActiveFlag\");\n        $(\"#germanyFlag\").removeClass(\"isActiveFlag\");\n        $(\"#englandFlag\").removeClass(\"isActiveFlag\");\n      });\n    });\n    $(\"#germanyFlag\").click(() => {\n      this.setState({\n        selectedForum: 'germany',\n        isGermanyForum: true,\n        isPolishForum: false,\n        isEnglishForum: false,\n        isTopGermanyForum: true,\n        isTopPolishForum: false,\n        isTopEnglishForum: false\n      }, () => {\n        $(\"#germanyFlag\").addClass(\"isActiveFlag\");\n        $(\"#polandFlag\").removeClass(\"isActiveFlag\");\n        $(\"#englandFlag\").removeClass(\"isActiveFlag\");\n      });\n    });\n    $(\"#englandFlag\").click(() => {\n      this.setState({\n        selectedForum: 'english',\n        isEnglishForum: true,\n        isPolishForum: false,\n        isGermanyForum: false,\n        isTopEnglishForum: true,\n        isTopPolishForum: false,\n        isTopGermanyForum: false\n      }, () => {\n        $(\"#englandFlag\").addClass(\"isActiveFlag\");\n        $(\"#germanyFlag\").removeClass(\"isActiveFlag\");\n        $(\"#polandFlag\").removeClass(\"isActiveFlag\");\n      });\n    });\n  }\n\n  onCreateTopicClick(e) {\n    if (this.state.selectedForum === '') {\n      e.preventDefault();\n      swal(this.props.t(\"forum.forum.news.title\"), this.props.t(\"forum.forum.news.message\"), \"warning\");\n    }\n  }\n\n  generatePolishTopics() {\n    return this.state.polishTopics.map((topic, index) => {\n      return React.createElement(Topic, {\n        id: topic.id,\n        owner: topic.owner,\n        title: topic.title,\n        createdAt: topic.createdAt,\n        languageForum: this.state.selectedForum,\n        count: topic.countPolish,\n        isLeft: this.state.isLeft,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      });\n    });\n  }\n\n  generateGermanyTopics() {\n    return this.state.germanyTopics.map((topic, index) => {\n      return React.createElement(Topic, {\n        id: topic.id,\n        owner: topic.owner,\n        title: topic.title,\n        createdAt: topic.createdAt,\n        languageForum: this.state.selectedForum,\n        count: topic.countGermany,\n        isLeft: this.state.isLeft,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      });\n    });\n  }\n\n  generateEnglishTopics() {\n    return this.state.englishTopics.map((topic, index) => {\n      return React.createElement(Topic, {\n        id: topic.id,\n        owner: topic.owner,\n        title: topic.title,\n        createdAt: topic.createdAt,\n        languageForum: this.state.selectedForum,\n        count: topic.countEnglish,\n        isLeft: this.state.isLeft,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      });\n    });\n  }\n\n  setTopEnglishFive() {\n    this.setState({\n      isEnglishFive: true\n    });\n  }\n\n  setTopGermanyFive() {\n    this.setState({\n      isGermanyFive: true\n    });\n  }\n\n  setTopPolishFive() {\n    this.setState({\n      isPolishFive: true\n    });\n  }\n\n  render() {\n    let isPolishForum = this.state.isPolishForum;\n    let isGermanyForum = this.state.isGermanyForum;\n    let isEnglishForum = this.state.isEnglishForum;\n    let isTopPolishForum = this.state.isTopPolishForum;\n    let isTopGermanyForum = this.state.isTopGermanyForum;\n    let isTopEnglishForum = this.state.isTopEnglishForum;\n    let isEnglishFive = this.state.isEnglishFive;\n    let isPolishFive = this.state.isPolishFive;\n    let isGermanyFive = this.state.isGermanyFive;\n    return React.createElement(\"div\", {\n      className: \"forum-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"forum-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, this.props.t(\"forum.forum.title\")), React.createElement(\"div\", {\n      className: \"language-forum-box language-forum-box-center language-shadow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"flag-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      id: \"polandFlag\",\n      src: poland,\n      alt: \"Polish flag\",\n      onClick: this.onFlagClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"flag-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      id: \"germanyFlag\",\n      src: germany,\n      alt: \"Germany flag\",\n      onClick: this.onFlagClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"flag-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      id: \"englandFlag\",\n      src: england,\n      alt: \"English flag\",\n      onClick: this.onFlagClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }))), React.createElement(Link, {\n      to: \"/create/topic/\".concat(this.state.selectedForum),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-primary btn-padding\",\n      onClick: this.onCreateTopicClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, this.props.t(\"forum.forum.createBtn\"))), isPolishForum || isGermanyForum || isEnglishForum ? React.createElement(\"div\", {\n      className: \"wrapper-forum-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"forum-topics-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, (isPolishForum || isGermanyForum || isEnglishForum) && React.createElement(\"div\", {\n      className: \"topics-box-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, \"All topics\"), isPolishForum && this.generatePolishTopics(), isGermanyForum && this.generateGermanyTopics(), isEnglishForum && this.generateEnglishTopics()), React.createElement(\"div\", {\n      className: \"forum-top-topics\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, (isEnglishFive || isGermanyFive || isPolishFive) && React.createElement(\"div\", {\n      className: \"top-topics-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, \"The most popular topics\"), (isTopPolishForum || isTopGermanyForum || isTopEnglishForum) && React.createElement(TopTopics, {\n      selectedForum: this.state.selectedForum,\n      setTopFiveIsTrue: this.setTopFiveIsTrue,\n      setTopEnglishFive: this.setTopEnglishFive,\n      setTopGermanyFive: this.setTopGermanyFive,\n      setTopPolishFive: this.setTopPolishFive,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }))) : React.createElement(\"div\", {\n      className: \"forum-diver\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: forumDiver,\n      alt: \"Forum diver\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default withTranslation(\"common\")(withRouter(Forum));","map":{"version":3,"sources":["/home/huber/Pulpit/divelog/frontend/src/components/forum/Forum.js"],"names":["React","poland","germany","england","$","Link","swal","Topic","ConvertTime","TopTopics","forumDiver","withRouter","withTranslation","Forum","Component","constructor","props","state","selectedForum","isEnglishForum","isPolishForum","isGermanyForum","englishTopics","polishTopics","germanyTopics","isTopEnglishForum","isTopPolishForum","isTopGermanyForum","topEnglishTopics","topPolishTopics","topGermanyTopics","isGermanyFive","isPolishFive","isEnglishFive","isLeft","onFlagClick","bind","onCreateTopicClick","generatePolishTopics","setTopEnglishFive","setTopGermanyFive","setTopPolishFive","componentDidMount","fetch","method","headers","then","response","json","jsonData","countPolish","countGermany","countEnglish","map","topic","index","languageForum","time","convertTime","createdAt","element","id","title","owner","user","name","setState","concat","e","preventDefault","click","addClass","removeClass","t","generateGermanyTopics","generateEnglishTopics","render","setTopFiveIsTrue"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../../css/Forum.css';\nimport poland from '../../img/flags/poland.jpg';\nimport germany from '../../img/flags/germany.png';\nimport england from '../../img/flags/england.jpg';\nimport $ from 'jquery';\nimport { Link } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport Topic from './Topic';\nimport ConvertTime from '../../util/ConvertTime';\nimport TopTopics from './TopTopics';\nimport forumDiver from '../../img/forum-diver-blue.png';\nimport { withRouter } from 'react-router';\nimport { withTranslation } from 'react-i18next';\n\nclass Forum extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            selectedForum: '',\n            isEnglishForum: false,\n            isPolishForum: false,\n            isGermanyForum: false,\n            englishTopics: [],\n            polishTopics: [],\n            germanyTopics: [],\n            isTopEnglishForum: false,\n            isTopPolishForum: false,\n            isTopGermanyForum: false,\n            topEnglishTopics: [],\n            topPolishTopics: [],\n            topGermanyTopics: [],\n            isGermanyFive: false,\n            isPolishFive: false,\n            isEnglishFive: false,\n            isLeft: false\n        }\n        this.ConvertTime = new ConvertTime();\n\n        this.onFlagClick = this.onFlagClick.bind(this);\n        this.onCreateTopicClick = this.onCreateTopicClick.bind(this);\n        this.generatePolishTopics = this.generatePolishTopics.bind(this);\n\n        this.setTopEnglishFive = this.setTopEnglishFive.bind(this);\n        this.setTopGermanyFive = this.setTopGermanyFive.bind(this);\n        this.setTopPolishFive = this.setTopPolishFive.bind(this);\n    }\n\n    componentDidMount() {\n        fetch(\"/get/topics/all\", {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'content-type': 'application/json'\n            }\n        }).then(response => response.json())\n        .then(jsonData => {\n            let countPolish = 0;\n            let countGermany = 0;\n            let countEnglish = 0;\n            jsonData.map((topic, index) => {\n                if(topic.languageForum === 'polish') {\n                    let time = this.ConvertTime.convertTime(topic.createdAt, null, false);\n\n                    const element = {\n                        id: topic.id,\n                        title: topic.title,\n                        createdAt: time[0],\n                        owner: topic.user.name,\n                        countPolish: countPolish\n                    }\n                    this.setState({ polishTopics: this.state.polishTopics.concat(element) });\n                    countPolish++\n                }\n\n                if(topic.languageForum === 'english') {\n                    let time = this.ConvertTime.convertTime(topic.createdAt, null, false);\n\n                    const element = {\n                        id: topic.id,\n                        title: topic.title,\n                        createdAt: time[0],\n                        owner: topic.user.name,\n                        countEnglish: countEnglish\n                    }\n                    this.setState({ englishTopics: this.state.englishTopics.concat(element) });\n                    countEnglish++\n                }\n\n                if(topic.languageForum === 'germany') {\n                    let time = this.ConvertTime.convertTime(topic.createdAt, null, false);\n\n                    const element = {\n                        id: topic.id,\n                        title: topic.title,\n                        createdAt: time[0],\n                        owner: topic.user.name,\n                        countGermany: countGermany\n                    }\n                    this.setState({ germanyTopics: this.state.germanyTopics.concat(element) });\n                    countGermany++\n                }\n            });\n            this.setState({ isLeft: true });\n        });\n    }\n\n    onFlagClick(e) {\n        e.preventDefault();\n\n        $(\"#polandFlag\").click(() => {\n            this.setState({ \n                selectedForum: 'polish',\n                isPolishForum: true,\n                isEnglishForum: false,\n                isGermanyForum: false,\n                isTopPolishForum: true,\n                isTopEnglishForum: false,\n                isTopGermanyForum: false\n            }, () => {\n                $(\"#polandFlag\").addClass(\"isActiveFlag\");\n                $(\"#germanyFlag\").removeClass(\"isActiveFlag\");\n                $(\"#englandFlag\").removeClass(\"isActiveFlag\");\n            });\n        });\n\n        $(\"#germanyFlag\").click(() => {\n            this.setState({ \n                selectedForum: 'germany',\n                isGermanyForum: true,\n                isPolishForum: false,\n                isEnglishForum: false,\n                isTopGermanyForum: true,\n                isTopPolishForum: false,\n                isTopEnglishForum: false\n            }, () => {\n                $(\"#germanyFlag\").addClass(\"isActiveFlag\");\n                $(\"#polandFlag\").removeClass(\"isActiveFlag\");\n                $(\"#englandFlag\").removeClass(\"isActiveFlag\");\n            });\n        });\n\n        $(\"#englandFlag\").click(() => {\n            this.setState({ \n                selectedForum: 'english',\n                isEnglishForum: true,\n                isPolishForum: false,\n                isGermanyForum: false,\n                isTopEnglishForum: true,\n                isTopPolishForum: false,\n                isTopGermanyForum: false\n            }, () => {\n                $(\"#englandFlag\").addClass(\"isActiveFlag\");\n                $(\"#germanyFlag\").removeClass(\"isActiveFlag\");\n                $(\"#polandFlag\").removeClass(\"isActiveFlag\");\n            });\n        });\n    }\n\n    onCreateTopicClick(e) {\n        if(this.state.selectedForum === '') {\n            e.preventDefault();\n            swal(this.props.t(\"forum.forum.news.title\"), this.props.t(\"forum.forum.news.message\"), \"warning\");\n        }\n    }\n\n    generatePolishTopics() {\n        return this.state.polishTopics.map((topic, index) => {\n             return (\n                <Topic \n                    id={topic.id}\n                    owner={topic.owner}\n                    title={topic.title}\n                    createdAt={topic.createdAt}\n                    languageForum={this.state.selectedForum}\n                    count={topic.countPolish}\n                    isLeft={this.state.isLeft}\n                />\n            );\n        });\n    }\n\n    generateGermanyTopics() {\n        return this.state.germanyTopics.map((topic, index) => {\n            return (\n               <Topic \n                   id={topic.id}\n                   owner={topic.owner}\n                   title={topic.title}\n                   createdAt={topic.createdAt}\n                   languageForum={this.state.selectedForum}\n                   count={topic.countGermany}\n                   isLeft={this.state.isLeft}\n               />\n           );\n       });\n    }\n\n    generateEnglishTopics() {\n        return this.state.englishTopics.map((topic, index) => {\n            return (\n               <Topic \n                   id={topic.id}\n                   owner={topic.owner}\n                   title={topic.title}\n                   createdAt={topic.createdAt}\n                   languageForum={this.state.selectedForum}\n                   count={topic.countEnglish}\n                   isLeft={this.state.isLeft}\n               />\n           );\n       });\n    }\n\n    setTopEnglishFive() {\n        this.setState({ isEnglishFive: true });\n    }\n\n    setTopGermanyFive() {\n        this.setState({ isGermanyFive: true });\n    }\n\n    setTopPolishFive() {\n        this.setState({ isPolishFive: true });\n    }\n\n    render() {\n        let isPolishForum = this.state.isPolishForum;\n        let isGermanyForum = this.state.isGermanyForum;\n        let isEnglishForum = this.state.isEnglishForum;\n\n        let isTopPolishForum = this.state.isTopPolishForum;\n        let isTopGermanyForum = this.state.isTopGermanyForum;\n        let isTopEnglishForum = this.state.isTopEnglishForum;\n\n        let isEnglishFive = this.state.isEnglishFive;\n        let isPolishFive = this.state.isPolishFive;\n        let isGermanyFive = this.state.isGermanyFive;\n\n        return (\n            <div className=\"forum-container\">\n                <div className=\"forum-title\">\n                    { this.props.t(\"forum.forum.title\") }\n                </div>\n                <div className=\"language-forum-box language-forum-box-center language-shadow\">\n                    <div className=\"flag-item\">\n                        <img \n                            id=\"polandFlag\"\n                            src={poland} \n                            alt=\"Polish flag\"\n                            onClick={this.onFlagClick}\n                        />\n                    </div>\n                    <div className=\"flag-item\">\n                        <img \n                            id=\"germanyFlag\"\n                            src={germany} \n                            alt=\"Germany flag\" \n                            onClick={this.onFlagClick}\n                        />\n                    </div>\n                    <div className=\"flag-item\">\n                        <img \n                            id=\"englandFlag\"\n                            src={england} \n                            alt=\"English flag\"\n                            onClick={this.onFlagClick} \n                        />\n                    </div>\n                </div>\n                <Link to={`/create/topic/${this.state.selectedForum}`}>\n                    <button \n                        className=\"btn btn-primary btn-padding\"\n                        onClick={this.onCreateTopicClick}\n                    >\n                        { this.props.t(\"forum.forum.createBtn\") }\n                    </button>\n                </Link>\n                { ( isPolishForum || isGermanyForum || isEnglishForum ) ?\n                    (\n                        <div className=\"wrapper-forum-box\">\n                            <div className=\"forum-topics-box\">\n                                { (isPolishForum || isGermanyForum || isEnglishForum) && <div className=\"topics-box-title\">All topics</div> }\n                                \n                                { isPolishForum && this.generatePolishTopics() }\n                                { isGermanyForum && this.generateGermanyTopics() }\n                                { isEnglishForum && this.generateEnglishTopics() }\n                            </div>\n                            <div className=\"forum-top-topics\">\n                                { ( isEnglishFive || isGermanyFive || isPolishFive ) && <div className=\"top-topics-title\">The most popular topics</div> }\n                                { (isTopPolishForum || isTopGermanyForum || isTopEnglishForum) && \n                                    <TopTopics \n                                        selectedForum={this.state.selectedForum}\n                                        setTopFiveIsTrue={this.setTopFiveIsTrue}\n                                        setTopEnglishFive={this.setTopEnglishFive}\n                                        setTopGermanyFive={this.setTopGermanyFive}\n                                        setTopPolishFive={this.setTopPolishFive}\n                                    />\n                                }\n                            </div>\n                        </div>\n                    ) : (\n                        <div className=\"forum-diver\">\n                            <img src={forumDiver} alt=\"Forum diver\" />\n                        </div>\n                    )\n                }\n            </div>\n        );\n    }\n}\n\nexport default withTranslation(\"common\")(withRouter(Forum));"]},"metadata":{},"sourceType":"module"}