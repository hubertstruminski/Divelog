{"ast":null,"code":"var _jsxFileName = \"/home/huber/Pulpit/divelog/react-divelog/src/components/settings/Settings.js\";\nimport React from 'react';\nimport '../../css/Settings.css';\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick() {\n    fetch(\"/generate/pdf\", {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'content-type': 'application/json'\n      },\n      responseType: 'blob'\n    }).then(response => {\n      console.log(response.text());\n      const file = new Blob([response.data], {\n        type: 'application/pdf'\n      });\n      const fileURL = URL.createObjectURL(file);\n      window.open(fileURL);\n    }); // }).then(response => response.blob()).then(this.showFile)\n  }\n\n  showFile(blob) {\n    // It is necessary to create a new blob object with mime-type explicitly set\n    // otherwise only Chrome works like it should\n    var newBlob = new Blob([blob], {\n      type: \"application/pdf\"\n    }); // IE doesn't allow using a blob object directly as link href\n    // instead it is necessary to use msSaveOrOpenBlob\n\n    if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n      window.navigator.msSaveOrOpenBlob(newBlob);\n      return;\n    } // For other browsers: \n    // Create a link pointing to the ObjectURL containing the blob.\n\n\n    const data = window.URL.createObjectURL(newBlob);\n    var link = document.createElement('a');\n    link.href = data;\n    link.download = \"file.pdf\";\n    link.click();\n    setTimeout(function () {\n      // For Firefox it is necessary to delay revoking the ObjectURL\n      window.URL.revokeObjectURL(data);\n    }, 100);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"settings-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: this.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"PDF\"));\n  }\n\n}\n\nexport default Settings;","map":{"version":3,"sources":["/home/huber/Pulpit/divelog/react-divelog/src/components/settings/Settings.js"],"names":["React","Settings","Component","constructor","props","onClick","bind","fetch","method","headers","responseType","then","response","console","log","text","file","Blob","data","type","fileURL","URL","createObjectURL","window","open","showFile","blob","newBlob","navigator","msSaveOrOpenBlob","link","document","createElement","href","download","click","setTimeout","revokeObjectURL","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,wBAAP;;AAEA,MAAMC,QAAN,SAAuBD,KAAK,CAACE,SAA7B,CAAuC;AACnCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,OAAL,GAAe,KAAKA,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAAf;AACH;;AAEDD,EAAAA,OAAO,GAAG;AACNE,IAAAA,KAAK,CAAC,eAAD,EAAkB;AACnBC,MAAAA,MAAM,EAAE,KADW;AAEnBC,MAAAA,OAAO,EAAE;AACL,kBAAU,mCADL;AAEL,wBAAgB;AAFX,OAFU;AAMnBC,MAAAA,YAAY,EAAE;AANK,KAAlB,CAAL,CAOGC,IAPH,CAOQC,QAAQ,IAAI;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAAT,EAAZ;AACA,YAAMC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACL,QAAQ,CAACM,IAAV,CAAT,EAA0B;AAAEC,QAAAA,IAAI,EAAE;AAAR,OAA1B,CAAb;AACA,YAAMC,OAAO,GAAGC,GAAG,CAACC,eAAJ,CAAoBN,IAApB,CAAhB;AACAO,MAAAA,MAAM,CAACC,IAAP,CAAYJ,OAAZ;AACH,KAZD,EADM,CAcN;AACH;;AAEDK,EAAAA,QAAQ,CAACC,IAAD,EAAM;AACV;AACA;AACA,QAAIC,OAAO,GAAG,IAAIV,IAAJ,CAAS,CAACS,IAAD,CAAT,EAAiB;AAACP,MAAAA,IAAI,EAAE;AAAP,KAAjB,CAAd,CAHU,CAKV;AACA;;AACA,QAAII,MAAM,CAACK,SAAP,IAAoBL,MAAM,CAACK,SAAP,CAAiBC,gBAAzC,EAA2D;AACvDN,MAAAA,MAAM,CAACK,SAAP,CAAiBC,gBAAjB,CAAkCF,OAAlC;AACA;AACH,KAVS,CAYV;AACA;;;AACA,UAAMT,IAAI,GAAGK,MAAM,CAACF,GAAP,CAAWC,eAAX,CAA2BK,OAA3B,CAAb;AACA,QAAIG,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAX;AACAF,IAAAA,IAAI,CAACG,IAAL,GAAYf,IAAZ;AACAY,IAAAA,IAAI,CAACI,QAAL,GAAc,UAAd;AACAJ,IAAAA,IAAI,CAACK,KAAL;AACAC,IAAAA,UAAU,CAAC,YAAU;AACjB;AACAb,MAAAA,MAAM,CAACF,GAAP,CAAWgB,eAAX,CAA2BnB,IAA3B;AACH,KAHS,EAGP,GAHO,CAAV;AAIH;;AAEDoB,EAAAA,MAAM,GAAG;AACL,WACI;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,SAAS,EAAC,iBAAlB;AAAoC,MAAA,OAAO,EAAE,KAAKjC,OAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,CADJ;AAKH;;AAtDkC;;AAyDvC,eAAeJ,QAAf","sourcesContent":["import React from 'react';\nimport '../../css/Settings.css';\n\nclass Settings extends React.Component {\n    constructor(props) {\n        super(props);\n        this.onClick = this.onClick.bind(this);\n    }\n    \n    onClick() {\n        fetch(\"/generate/pdf\", {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'content-type': 'application/json'\n            },\n            responseType: 'blob'\n        }).then(response => {\n            console.log(response.text());\n            const file = new Blob([response.data], { type: 'application/pdf' });\n            const fileURL = URL.createObjectURL(file);\n            window.open(fileURL);\n        });\n        // }).then(response => response.blob()).then(this.showFile)\n    }\n\n    showFile(blob){\n        // It is necessary to create a new blob object with mime-type explicitly set\n        // otherwise only Chrome works like it should\n        var newBlob = new Blob([blob], {type: \"application/pdf\"})\n\n        // IE doesn't allow using a blob object directly as link href\n        // instead it is necessary to use msSaveOrOpenBlob\n        if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n            window.navigator.msSaveOrOpenBlob(newBlob);\n            return;\n        } \n\n        // For other browsers: \n        // Create a link pointing to the ObjectURL containing the blob.\n        const data = window.URL.createObjectURL(newBlob);\n        var link = document.createElement('a');\n        link.href = data;\n        link.download=\"file.pdf\";\n        link.click();\n        setTimeout(function(){\n            // For Firefox it is necessary to delay revoking the ObjectURL\n            window.URL.revokeObjectURL(data);\n        }, 100);\n    }\n\n    render() {\n        return (\n            <div className=\"settings-container\">\n                <button className=\"btn btn-primary\" onClick={this.onClick}>PDF</button>\n            </div>\n        );\n    }\n}\n\nexport default Settings;"]},"metadata":{},"sourceType":"module"}