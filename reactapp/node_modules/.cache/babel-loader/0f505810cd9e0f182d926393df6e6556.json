{"ast":null,"code":"var _jsxFileName = \"/home/huber/Pulpit/Divelog/reactapp/src/components/settings/Settings.js\";\nimport React from 'react';\nimport '../../css/Settings.css';\nimport { BACKEND_API_URL } from '../../actions/types';\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport { coy, dark, funky, okaidia, tomorrow, twilight, prism, vs, duotoneLight } from 'react-syntax-highlighter/dist/esm/styles/prism';\nimport $ from 'jquery';\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onClick = this.onClick.bind(this);\n  }\n\n  componentDidMount() {\n    $(\"textarea\").autoResize();\n  }\n\n  onClick() {\n    fetch(\"\".concat(BACKEND_API_URL, \"/generate/pdf\"), {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'content-type': 'application/json'\n      },\n      responseType: 'blob' // }).then(response => {\n      //     console.log(response.text());\n      //     const file = new Blob([response.data], { type: 'application/pdf' });\n      //     const fileURL = URL.createObjectURL(file);\n      //     window.open(fileURL);\n      // });\n\n    }).then(response => response.blob()).then(this.showFile);\n  }\n\n  showFile(blob) {\n    // It is necessary to create a new blob object with mime-type explicitly set\n    // otherwise only Chrome works like it should\n    var newBlob = new Blob([blob], {\n      type: \"application/pdf\"\n    }); // IE doesn't allow using a blob object directly as link href\n    // instead it is necessary to use msSaveOrOpenBlob\n\n    if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n      window.navigator.msSaveOrOpenBlob(newBlob);\n      return;\n    } // For other browsers: \n    // Create a link pointing to the ObjectURL containing the blob.\n\n\n    const data = window.URL.createObjectURL(newBlob);\n    var link = document.createElement('a');\n    link.href = data;\n    link.download = \"file.pdf\";\n    link.click();\n    setTimeout(function () {\n      // For Firefox it is necessary to delay revoking the ObjectURL\n      window.URL.revokeObjectURL(data);\n    }, 100);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"settings-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: this.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"PDF\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(\"textarea\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Settings;","map":{"version":3,"sources":["/home/huber/Pulpit/Divelog/reactapp/src/components/settings/Settings.js"],"names":["React","BACKEND_API_URL","Prism","SyntaxHighlighter","coy","dark","funky","okaidia","tomorrow","twilight","prism","vs","duotoneLight","$","Settings","Component","constructor","props","onClick","bind","componentDidMount","autoResize","fetch","method","headers","responseType","then","response","blob","showFile","newBlob","Blob","type","window","navigator","msSaveOrOpenBlob","data","URL","createObjectURL","link","document","createElement","href","download","click","setTimeout","revokeObjectURL","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,wBAAP;AACA,SAASC,eAAT,QAAgC,qBAAhC;AACA,SAASC,KAAK,IAAIC,iBAAlB,QAA2C,0BAA3C;AACA,SAASC,GAAT,EAAcC,IAAd,EAAoBC,KAApB,EAA2BC,OAA3B,EAAoCC,QAApC,EAA8CC,QAA9C,EAAwDC,KAAxD,EAA+DC,EAA/D,EAAmEC,YAAnE,QAAuF,gDAAvF;AACA,OAAOC,CAAP,MAAc,QAAd;;AACA,MAAMC,QAAN,SAAuBd,KAAK,CAACe,SAA7B,CAAuC;AACnCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,OAAL,GAAe,KAAKA,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAAf;AACH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChBP,IAAAA,CAAC,CAAC,UAAD,CAAD,CAAcQ,UAAd;AACH;;AAEDH,EAAAA,OAAO,GAAG;AACNI,IAAAA,KAAK,WAAIrB,eAAJ,oBAAoC;AACrCsB,MAAAA,MAAM,EAAE,KAD6B;AAErCC,MAAAA,OAAO,EAAE;AACL,kBAAU,mCADL;AAEL,wBAAgB;AAFX,OAF4B;AAMrCC,MAAAA,YAAY,EAAE,MANuB,CAOzC;AACA;AACA;AACA;AACA;AACA;;AAZyC,KAApC,CAAL,CAaGC,IAbH,CAaQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAbpB,EAaqCF,IAbrC,CAa0C,KAAKG,QAb/C;AAcH;;AAEDA,EAAAA,QAAQ,CAACD,IAAD,EAAM;AACV;AACA;AACA,QAAIE,OAAO,GAAG,IAAIC,IAAJ,CAAS,CAACH,IAAD,CAAT,EAAiB;AAACI,MAAAA,IAAI,EAAE;AAAP,KAAjB,CAAd,CAHU,CAKV;AACA;;AACA,QAAIC,MAAM,CAACC,SAAP,IAAoBD,MAAM,CAACC,SAAP,CAAiBC,gBAAzC,EAA2D;AACvDF,MAAAA,MAAM,CAACC,SAAP,CAAiBC,gBAAjB,CAAkCL,OAAlC;AACA;AACH,KAVS,CAYV;AACA;;;AACA,UAAMM,IAAI,GAAGH,MAAM,CAACI,GAAP,CAAWC,eAAX,CAA2BR,OAA3B,CAAb;AACA,QAAIS,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAX;AACAF,IAAAA,IAAI,CAACG,IAAL,GAAYN,IAAZ;AACAG,IAAAA,IAAI,CAACI,QAAL,GAAc,UAAd;AACAJ,IAAAA,IAAI,CAACK,KAAL;AACAC,IAAAA,UAAU,CAAC,YAAU;AACjB;AACAZ,MAAAA,MAAM,CAACI,GAAP,CAAWS,eAAX,CAA2BV,IAA3B;AACH,KAHS,EAGP,GAHO,CAAV;AAIH;;AAEDW,EAAAA,MAAM,GAAG;AACL,WACI;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,SAAS,EAAC,iBAAlB;AAAoC,MAAA,OAAO,EAAE,KAAK7B,OAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,CADJ;AA+BH;;AApFkC;;AAuFvC,eAAeJ,QAAf","sourcesContent":["import React from 'react';\nimport '../../css/Settings.css';\nimport { BACKEND_API_URL } from '../../actions/types';\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport { coy, dark, funky, okaidia, tomorrow, twilight, prism, vs, duotoneLight } from 'react-syntax-highlighter/dist/esm/styles/prism';\nimport $ from 'jquery';\nclass Settings extends React.Component {\n    constructor(props) {\n        super(props);\n        this.onClick = this.onClick.bind(this);\n    }\n\n    componentDidMount() {\n        $(\"textarea\").autoResize();\n    }\n\n    onClick() {\n        fetch(`${BACKEND_API_URL}/generate/pdf`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'content-type': 'application/json'\n            },\n            responseType: 'blob'\n        // }).then(response => {\n        //     console.log(response.text());\n        //     const file = new Blob([response.data], { type: 'application/pdf' });\n        //     const fileURL = URL.createObjectURL(file);\n        //     window.open(fileURL);\n        // });\n        }).then(response => response.blob()).then(this.showFile)\n    }\n\n    showFile(blob){\n        // It is necessary to create a new blob object with mime-type explicitly set\n        // otherwise only Chrome works like it should\n        var newBlob = new Blob([blob], {type: \"application/pdf\"})\n\n        // IE doesn't allow using a blob object directly as link href\n        // instead it is necessary to use msSaveOrOpenBlob\n        if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n            window.navigator.msSaveOrOpenBlob(newBlob);\n            return;\n        } \n\n        // For other browsers: \n        // Create a link pointing to the ObjectURL containing the blob.\n        const data = window.URL.createObjectURL(newBlob);\n        var link = document.createElement('a');\n        link.href = data;\n        link.download=\"file.pdf\";\n        link.click();\n        setTimeout(function(){\n            // For Firefox it is necessary to delay revoking the ObjectURL\n            window.URL.revokeObjectURL(data);\n        }, 100);\n    }\n\n    render() {\n        return (\n            <div className=\"settings-container\">\n                <button className=\"btn btn-primary\" onClick={this.onClick}>PDF</button>\n                <br />\n                <textarea />\n                {/* <SyntaxHighlighter language=\"java\" style={tomorrow}>\n                    {`\n                    @PostMapping(value = \"/twitter/search/tweets/{jwtToken}', produces = \"application/json\")\n                    public ResponseEntity<?> getSearchTweets(@RequestBody String query, @PathVariable String jwtToken) throws TwitterException {\n                        Twitter twitter = setTwitterConfiguration(jwtToken);\n                        \n                        if(twitter == null) {\n                            return new ResponseEntity<Void>(HttpStatus.BAD_REQUEST);\n                        }\n                        \n                        Query tweetsQuery = new Query(query);\n                        \n                        QueryResult queryResult = twitter.search(tweetsQuery);\n                        List<Status> tweets = queryResult.getTweets();\n                        StringBuilder builder = new StringBuilder();\n                        \n                        for(Status tweet: tweets) {\n                            builder = createOEmbedTweet(tweet, twitter, builder);\n                        }\n                        \n                        return new ResponseEntity<String>(builder.toString(), HttpStatus.OK);\n                    }\n                    `}\n                </SyntaxHighlighter> */}\n            </div>\n        );\n    }\n}\n\nexport default Settings;"]},"metadata":{},"sourceType":"module"}