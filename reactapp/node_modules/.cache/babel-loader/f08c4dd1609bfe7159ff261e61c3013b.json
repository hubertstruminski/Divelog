{"ast":null,"code":"var _jsxFileName = \"/home/msi/Pulpit/Divelog/react-divelog/src/components/User.js\";\nimport React from 'react';\nimport FB from 'fb';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { getUserData } from '../actions/LoginActions';\n\nclass User extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      accessToken: '',\n      email: '',\n      name: '',\n      userID: '' // this.loadUserData = this.loadUserData.bind(this);\n\n    };\n  }\n\n  componentDidMount() {\n    let userID = localStorage.getItem(\"KEY\"); // this.props.getUserData(userID);\n    // fetch(`/getuserdata/${userID}`)\n    // .then(response => {\n    //     console.log(\"fetch response\");\n    //     console.log(response);\n    // }) \n\n    fetch(\"/getuserdata/\".concat(userID), {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json'\n      }\n    }).then(response => response.json()).then(jsonData => {\n      console.log(jsonData);\n      console.log(jsonData.accessToken);\n      this.setState({\n        accessToken: jsonData.accessToken,\n        email: jsonData.email,\n        name: jsonData.name,\n        userID: jsonData.userID\n      });\n      FB.api('/me/feed', {\n        fields: 'id,name',\n        access_token: jsonData.accessToken\n      }, function (response2) {\n        console.log(\"response 2: \");\n        console.log(response2);\n      });\n    }); // this.loadUserData();\n\n    window.fbAsyncInit = function () {\n      FB.init({\n        appId: '455695445269575',\n        cookie: true,\n        xfbml: true,\n        version: 'v3.3'\n      });\n      FB.getLoginStatus(function (response) {\n        // FB.api('/me', 'GET', {\n        //     fields: 'id,name,email', \n        //     access_token: accessToken\n        // }, function(response) {\n        //     console.log(response);\n        // });\n        console.log(response);\n      }.bind(this));\n    }.bind(this);\n\n    (function (d, s, id) {\n      var js,\n          fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) return;\n      js = d.createElement(s);\n      js.id = id;\n      js.src = \"//connect.facebook.net/en_US/all.js\";\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, 'script', 'facebook-jssdk');\n  } // loadUserData() {\n  //     const { user } = this.props.user;\n  //     console.log(\"user: \");\n  //     console.log(user);\n  //     this.setState({ userData: user});\n  // }\n\n\n  render() {\n    console.log(this.props.user);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Codecool\");\n  }\n\n}\n\nUser.propTypes = {\n  user: PropTypes.object.isRequired,\n  getUserData: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.user\n});\n\nexport default connect(mapStateToProps, {\n  getUserData\n})(withRouter(User));","map":{"version":3,"sources":["/home/msi/Pulpit/Divelog/react-divelog/src/components/User.js"],"names":["React","FB","axios","withRouter","PropTypes","connect","getUserData","User","Component","constructor","props","state","accessToken","email","name","userID","componentDidMount","localStorage","getItem","fetch","method","headers","then","response","json","jsonData","console","log","setState","api","fields","access_token","response2","window","fbAsyncInit","init","appId","cookie","xfbml","version","getLoginStatus","bind","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","render","user","propTypes","object","isRequired","func","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport FB from 'fb';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { getUserData } from '../actions/LoginActions';\n\nclass User extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            accessToken: '',\n            email: '',\n            name: '',\n            userID: ''\n        }\n        // this.loadUserData = this.loadUserData.bind(this);\n    }\n    componentDidMount() {\n        let userID = localStorage.getItem(\"KEY\");\n        // this.props.getUserData(userID);\n        // fetch(`/getuserdata/${userID}`)\n        // .then(response => {\n        //     console.log(\"fetch response\");\n        //     console.log(response);\n        // }) \n\n        fetch(`/getuserdata/${userID}`, {\n            method: 'GET',\n            headers: {\n              'content-type': 'application/json'\n            }\n          })\n          .then(response => response.json())\n          .then(jsonData => {\n            console.log(jsonData)\n            console.log(jsonData.accessToken);\n\n            this.setState({\n                accessToken: jsonData.accessToken,\n                email: jsonData.email,\n                name: jsonData.name,\n                userID: jsonData.userID\n            });\n\n            FB.api('/me/feed', { fields: 'id,name', access_token: jsonData.accessToken }, function (response2) {\n                console.log(\"response 2: \");\n                console.log(response2);\n            });\n          })\n\n        // this.loadUserData();\n\n\n\n \n        window.fbAsyncInit = function() {\n            FB.init({\n                appId      : '455695445269575',\n                cookie     : true,\n                xfbml      : true, \n                version    : 'v3.3'\n            });\n        \n            FB.getLoginStatus(function(response) {\n                // FB.api('/me', 'GET', {\n                //     fields: 'id,name,email', \n                //     access_token: accessToken\n                // }, function(response) {\n                //     console.log(response);\n                // });\n                console.log(response);\n            }.bind(this));\n\n        }.bind(this);\n\n        (function(d, s, id) {\n            var js, fjs = d.getElementsByTagName(s)[0];\n            if (d.getElementById(id)) return;                js = d.createElement(s); js.id = id;\n            js.src = \"//connect.facebook.net/en_US/all.js\";\n            fjs.parentNode.insertBefore(js, fjs);\n        }(document, 'script', 'facebook-jssdk'));\n    }\n\n    // loadUserData() {\n    //     const { user } = this.props.user;\n    //     console.log(\"user: \");\n    //     console.log(user);\n    //     this.setState({ userData: user});\n    // }\n\n    render() {\n        console.log(this.props.user);\n        return (\n            <div>\n                Codecool\n            </div>\n        );\n    }\n}\n\nUser.propTypes = {\n    user: PropTypes.object.isRequired,\n    getUserData: PropTypes.func.isRequired\n}\n\nconst mapStateToProps = state => ({\n    user: state.user\n})\n\nexport default connect(mapStateToProps, { getUserData })(withRouter(User));"]},"metadata":{},"sourceType":"module"}