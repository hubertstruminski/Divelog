{"ast":null,"code":"var _jsxFileName = \"/home/huber/Pulpit/Divelog/reactapp/src/components/LogIn.js\";\nimport React from 'react';\nimport '../css/LogIn.css';\nimport logo from '../img/eDivelog.png';\nimport { withTranslation } from 'react-i18next';\nimport FacebookLogin from 'react-facebook-login';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport { AuthObject } from '../util/AuthObject';\nimport AuthService from '../util/AuthService';\nimport $ from 'jquery';\nimport TwitterLogin from 'react-twitter-auth';\nimport { BACKEND_API_URL } from '../actions/types';\n\nclass LogIn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirectToReferrer: false\n    };\n    this.Auth = new AuthService();\n    this.responseFacebook = this.responseFacebook.bind(this);\n    this.onTwitterClick = this.onTwitterClick.bind(this);\n  }\n\n  componentDidMount() {\n    $(\"nav\").css({\n      \"position\": \"fixed\",\n      \"width\": \"100%\"\n    });\n  }\n\n  componentWillUnmount() {\n    $(\"nav\").css({\n      \"position\": \"static\"\n    });\n  }\n\n  responseFacebook(response) {\n    const loginRequest = {\n      accessToken: response[\"accessToken\"],\n      email: response[\"email\"],\n      name: response[\"name\"],\n      userID: response[\"userID\"],\n      pictureUrl: response[\"picture\"][\"data\"][\"url\"]\n    };\n    axios({\n      method: 'POST',\n      url: \"\".concat(BACKEND_API_URL, \"/signin\"),\n      data: loginRequest,\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-type\": \"application/json\"\n      }\n    }).then(response => {\n      this.Auth.setToken(response[\"data\"]);\n    }).catch(err => {\n      console.log(err);\n    });\n    AuthObject.authenticate(() => {\n      this.setState(() => ({\n        redirectToReferrer: true\n      }));\n    });\n    AuthObject.setPrincipal(loginRequest);\n    return React.createElement(Redirect, {\n      to: \"/dashboard/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    });\n  }\n\n  onTwitterClick() {\n    // window.location.href = \"https://api.divelog.eu/signin\"\n    // window.location.href=\"http://localhost:5000/signin\"\n    fetch(\"\".concat(BACKEND_API_URL, \"/signin\"), {\n      method: 'GET',\n      redirect: 'follow',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      console.log(response);\n    });\n  }\n\n  render() {\n    const _ref = this.props.location.state || {\n      from: {\n        pathname: '/dashboard'\n      }\n    },\n          from = _ref.from;\n\n    const redirectToReferrer = this.state.redirectToReferrer;\n\n    if (redirectToReferrer === true) {\n      return React.createElement(Redirect, {\n        to: from,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"login-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"login-form-container form-container-shadow form-size\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"logo-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, this.props.t(\"login.login\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: logo,\n      alt: \"divelog\",\n      className: \"logo-space logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), \"Divelog\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(FacebookLogin, {\n      appId: \"455695445269575\",\n      autoLoad: false,\n      fields: \"name,email,picture\",\n      scope: \"public_profile,user_friends\",\n      callback: this.responseFacebook,\n      cssClass: \"btn btn-lg btn-fb fb-btn-white-font\",\n      icon: \"<i className='fab fa-facebook-f pr-1' />\",\n      textButton: this.props.t(\"login.facebook-btn\"),\n      installed: true,\n      isDisabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-tw fb-btn-white-font btn-tw-background btn-tw-width\",\n      onClick: this.onTwitterClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"fab fa-twitter pr-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), \"LOG IN WITH TWITTER\"))));\n  }\n\n}\n\nexport default withTranslation('common')(LogIn);","map":{"version":3,"sources":["/home/huber/Pulpit/Divelog/reactapp/src/components/LogIn.js"],"names":["React","logo","withTranslation","FacebookLogin","axios","Redirect","AuthObject","AuthService","$","TwitterLogin","BACKEND_API_URL","LogIn","Component","constructor","props","state","redirectToReferrer","Auth","responseFacebook","bind","onTwitterClick","componentDidMount","css","componentWillUnmount","response","loginRequest","accessToken","email","name","userID","pictureUrl","method","url","data","headers","then","setToken","catch","err","console","log","authenticate","setState","setPrincipal","fetch","redirect","render","location","from","pathname","t"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../css/LogIn.css';\nimport logo from '../img/eDivelog.png';\nimport { withTranslation } from 'react-i18next';\nimport FacebookLogin from 'react-facebook-login';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport { AuthObject } from '../util/AuthObject';\nimport AuthService from '../util/AuthService';\nimport $ from 'jquery';\nimport TwitterLogin from 'react-twitter-auth';\nimport { BACKEND_API_URL } from '../actions/types';\n\nclass LogIn extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            redirectToReferrer: false\n        }\n        this.Auth = new AuthService();\n        this.responseFacebook = this.responseFacebook.bind(this);\n        this.onTwitterClick = this.onTwitterClick.bind(this);\n    }\n\n    componentDidMount() {\n        $(\"nav\").css({ \"position\": \"fixed\", \"width\": \"100%\"});\n    }\n\n    componentWillUnmount() {\n        $(\"nav\").css({ \"position\": \"static\"});\n    }\n\n    responseFacebook(response) {\n        const loginRequest = {\n            accessToken: response[\"accessToken\"],\n            email: response[\"email\"],\n            name: response[\"name\"],\n            userID: response[\"userID\"],\n            pictureUrl: response[\"picture\"][\"data\"][\"url\"]\n        }\n\n        axios({\n            method: 'POST',\n            url: `${BACKEND_API_URL}/signin`,\n            data: loginRequest,\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-type\": \"application/json\"\n            }\n        }).then(response => {\n            this.Auth.setToken(response[\"data\"]);\n        }).catch(err => {\n            console.log(err);\n        });\n\n        AuthObject.authenticate(() => {\n            this.setState(() => ({redirectToReferrer: true }));\n        })\n        AuthObject.setPrincipal(loginRequest);\n\n        return <Redirect to=\"/dashboard/\" />\n    }\n\n    onTwitterClick() {\n        // window.location.href = \"https://api.divelog.eu/signin\"\n        // window.location.href=\"http://localhost:5000/signin\"\n        fetch(`${BACKEND_API_URL}/signin`, {\n            method: 'GET',\n            redirect: 'follow',\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        }).then(response => {\n            console.log(response);\n        });\n    }\n\n    render() {\n        const { from } = this.props.location.state || { from: { pathname: '/dashboard' }}\n        const { redirectToReferrer } = this.state;\n\n        if(redirectToReferrer === true) {\n            return <Redirect to={from} />\n        }\n\n        return(\n            <div className=\"login-container\">\n                <div className=\"login-form-container form-container-shadow form-size\">\n                    <div>\n                        <span className=\"logo-text\">\n                            {this.props.t(\"login.login\")}\n                        </span>\n                        <br />\n                        <img src={logo} alt=\"divelog\" className=\"logo-space logo\" />\n                        <br />\n                        Divelog\n                        <br />\n                        <hr />\n                        <br />\n                        <FacebookLogin\n                            appId=\"455695445269575\"\n                            autoLoad={false}\n                            fields=\"name,email,picture\"\n                            scope=\"public_profile,user_friends\"\n                            callback={this.responseFacebook}\n                            cssClass=\"btn btn-lg btn-fb fb-btn-white-font\"\n                            icon=\"<i className='fab fa-facebook-f pr-1' />\"\n                            textButton={this.props.t(\"login.facebook-btn\")}\n                            installed={true}\n                            isDisabled={true}\n                        />\n                        <br />\n                        <button \n                            type=\"button\" \n                            className=\"btn btn-tw fb-btn-white-font btn-tw-background btn-tw-width\"\n                            onClick={this.onTwitterClick}\n                        >\n                            <i class=\"fab fa-twitter pr-1\"></i> \n                            LOG IN WITH TWITTER\n                        </button>\n                        {/* <TwitterLogin \n                            loginUrl=\"http://divelog.us-east-1.elasticbeanstalk.com/signin/twitter\"\n                            onFailure={this.onFailed}\n                            onSuccess={this.onSuccess}\n                            requestTokenUrl=\"http://divelog.us-east-1.elasticbeanstalk.com/callback\"\n                       />\n                       <br />\n                        <TwitterLogin \n                            loginUrl=\"http://localhost:5000/signin/twitter\"\n                            onFailure={this.onFailed}\n                            onSuccess={this.onSuccess}\n                            requestTokenUrl=\"http://localhost:5000/callback\"\n                       /> */}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withTranslation('common')(LogIn);"]},"metadata":{},"sourceType":"module"}