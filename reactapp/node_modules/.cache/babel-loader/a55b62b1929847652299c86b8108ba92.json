{"ast":null,"code":"var _jsxFileName = \"/home/huber/Pulpit/divelog/react-divelog/src/components/forum/AddTopic.js\";\nimport React from 'react';\nimport '../../css/AddTopic.css';\nimport $ from 'jquery';\nimport Unsplash from 'unsplash-js';\nimport { Redirect } from 'react-router-dom';\n\nclass AddTopic extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: '',\n      message: '',\n      isInvalidTitle: false,\n      isInvalidMessage: false,\n      isDone: false,\n      unsplashUrl: ''\n    };\n    this.errors = [];\n    this.fileInput = React.createRef();\n    this.onChange = this.onChange.bind(this);\n    this.onSubmitForm = this.onSubmitForm.bind(this);\n    this.validateForm = this.validateForm.bind(this);\n  }\n\n  onChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  showInvalidTitle(isInvalidTitle) {\n    if (isInvalidTitle) {\n      return React.createElement(\"div\", {\n        className: \"alert alert-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }, \"Title length must be between 10 and 160 characters.\");\n    }\n\n    return null;\n  }\n\n  showInvalidMessage(isInvalidMessage) {\n    if (isInvalidMessage) {\n      return React.createElement(\"div\", {\n        className: \"alert alert-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, \"Message length must be minimum 10 characters.\");\n    }\n\n    return null;\n  }\n\n  validateForm(e) {\n    if (this.state.title.length < 10 || this.state.title.length > 160) {\n      e.preventDefault();\n      this.setState({\n        isInvalidTitle: true\n      });\n      this.errors.push(true);\n    }\n\n    if (this.state.message.length < 10) {\n      e.preventDefault();\n      this.setState({\n        isInvalidMessage: true\n      });\n      this.errors.push(true);\n    }\n  }\n\n  componentDidMount() {\n    const unsplash = new Unsplash({\n      applicationId: \"a7dc421f598ef954b00d0880bb3ede81f8973bd21c43be006b6be14ca8f100d9\",\n      secret: \"957ca7dde447819e29723f96628960eb8668a7a00be0d60d39f4e4a1ef38b0d3\",\n      callbackUrl: \"http://localhost:3000\"\n    });\n    const authenticationUrl = unsplash.auth.getAuthenticationUrl([\"public\", \"read_user\", \"write_user\", \"read_photos\", \"write_photos\"]);\n    console.log(authenticationUrl);\n    let redirectIndex = authenticationUrl.indexOf(\"redirect_uri\");\n    let beforeAUthenticationUrl = authenticationUrl.substr(0, redirectIndex + 1 + \"redirect_uri\".length);\n    console.log(beforeAUthenticationUrl);\n    let responseTypeIndex = authenticationUrl.indexOf(\"response_type\");\n    let result = beforeAUthenticationUrl + \"urn:ietf:wg:oauth:2.0:oob\" + authenticationUrl.substr(responseTypeIndex - 1, authenticationUrl.length - responseTypeIndex + 1);\n    console.log(result);\n    window.location.assign(result);\n    this.setState({\n      isDone: true\n    }, () => {\n      console.log(\"Hubert Strumiński\");\n    });\n  }\n\n  onSubmitForm(e) {\n    e.preventDefault();\n    this.validateForm(e);\n\n    if (this.errors.length === 0) {// console.log(this.fileInput.current.files[0].name);\n      // unsplash.auth.userAuthentication(result)\n      // .then(toJson => toJson.json())\n      // .then(json => {\n      //     console.log(json);\n      //     unsplash.auth.setBearerToken(json.access_token);\n      // });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"add-topic-container add-topic-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"new-topic-box new-topic-box-shadow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"new-topic-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Add new topic\"), React.createElement(\"form\", {\n      onSubmit: this.onSubmitForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      for: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Title\"), React.createElement(\"input\", {\n      className: \"form-control form-control-lg\",\n      type: \"text\",\n      id: \"title\",\n      name: \"title\",\n      placeholder: \"Enter title\",\n      value: this.state.title,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    })), this.showInvalidTitle(this.state.isInvalidTitle), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      for: \"message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Message\"), React.createElement(\"textarea\", {\n      className: \"form-control form-control-lg\",\n      id: \"message\",\n      name: \"message\",\n      value: this.state.message,\n      onChange: this.onChange,\n      rows: \"17\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    })), this.showInvalidMessage(this.state.isInvalidMessage), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      for: \"file\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Upload data\"), React.createElement(\"input\", {\n      id: \"file\",\n      type: \"file\",\n      className: \"form-control-file\",\n      ref: this.fileInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary new-topic-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Publicate\"))));\n  }\n\n}\n\nexport default AddTopic;","map":{"version":3,"sources":["/home/huber/Pulpit/divelog/react-divelog/src/components/forum/AddTopic.js"],"names":["React","$","Unsplash","Redirect","AddTopic","Component","constructor","props","state","title","message","isInvalidTitle","isInvalidMessage","isDone","unsplashUrl","errors","fileInput","createRef","onChange","bind","onSubmitForm","validateForm","e","setState","target","name","value","showInvalidTitle","showInvalidMessage","length","preventDefault","push","componentDidMount","unsplash","applicationId","secret","callbackUrl","authenticationUrl","auth","getAuthenticationUrl","console","log","redirectIndex","indexOf","beforeAUthenticationUrl","substr","responseTypeIndex","result","window","location","assign","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../../css/AddTopic.css';\nimport $ from 'jquery';\nimport Unsplash from 'unsplash-js';\nimport { Redirect } from 'react-router-dom';\n\nclass AddTopic extends React.Component {\n    constructor(props) {\n        super(props);\n    \n        this.state = {\n            title: '',\n            message: '',\n            isInvalidTitle: false,\n            isInvalidMessage: false,\n            isDone: false,\n            unsplashUrl: ''\n        }\n        this.errors = [];\n        this.fileInput = React.createRef();\n\n        this.onChange = this.onChange.bind(this);\n        this.onSubmitForm = this.onSubmitForm.bind(this);\n        this.validateForm = this.validateForm.bind(this);\n    }\n\n    onChange(e) {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    showInvalidTitle(isInvalidTitle) {\n        if(isInvalidTitle) {\n            return (\n                <div className=\"alert alert-danger\">\n                    Title length must be between 10 and 160 characters.\n                </div>\n            );\n        }\n        return null;\n    }\n\n    showInvalidMessage(isInvalidMessage) {\n        if(isInvalidMessage) {\n            return (\n                <div className=\"alert alert-danger\">\n                    Message length must be minimum 10 characters.\n                </div>\n            );\n        }\n        return null;\n    }\n\n    validateForm(e) {\n        if(this.state.title.length < 10 || this.state.title.length > 160) {\n            e.preventDefault();\n            this.setState({ isInvalidTitle: true });\n            this.errors.push(true);\n        }\n\n        if(this.state.message.length < 10) {\n            e.preventDefault();\n            this.setState({ isInvalidMessage: true });\n            this.errors.push(true);\n        }\n    }\n\n    componentDidMount() {\n        const unsplash = new Unsplash({\n            applicationId: \"a7dc421f598ef954b00d0880bb3ede81f8973bd21c43be006b6be14ca8f100d9\",\n            secret: \"957ca7dde447819e29723f96628960eb8668a7a00be0d60d39f4e4a1ef38b0d3\",\n            callbackUrl: \"http://localhost:3000\"\n        });\n\n        const authenticationUrl = unsplash.auth.getAuthenticationUrl([\n            \"public\", \n            \"read_user\",\n            \"write_user\",\n            \"read_photos\",\n            \"write_photos\"\n        ]);\n        console.log(authenticationUrl);\n        let redirectIndex = authenticationUrl.indexOf(\"redirect_uri\");\n\n        let beforeAUthenticationUrl = authenticationUrl.substr(0, redirectIndex + 1 + \"redirect_uri\".length);\n        console.log(beforeAUthenticationUrl);\n\n        let responseTypeIndex = authenticationUrl.indexOf(\"response_type\");\n        let result = beforeAUthenticationUrl + \"urn:ietf:wg:oauth:2.0:oob\" + authenticationUrl.substr(responseTypeIndex - 1, authenticationUrl.length - responseTypeIndex + 1);\n        console.log(result);\n\n        window.location.assign(result);\n\n        this.setState({ isDone: true}, () => {\n            console.log(\"Hubert Strumiński\");\n        })\n    }\n\n    onSubmitForm(e) {\n        e.preventDefault();\n\n        this.validateForm(e);\n\n        if(this.errors.length === 0) {\n            // console.log(this.fileInput.current.files[0].name);\n\n            // unsplash.auth.userAuthentication(result)\n            // .then(toJson => toJson.json())\n            // .then(json => {\n            //     console.log(json);\n            //     unsplash.auth.setBearerToken(json.access_token);\n            // });\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"add-topic-container add-topic-center\">\n                <div className=\"new-topic-box new-topic-box-shadow\">\n                    <div className=\"new-topic-title\">\n                        Add new topic\n                    </div>\n\n                    <form onSubmit={this.onSubmitForm}>\n                        <div className=\"form-group\">\n                            <label for=\"title\">Title</label>\n                            <input \n                                className=\"form-control form-control-lg\"\n                                type=\"text\"\n                                id=\"title\"\n                                name=\"title\"\n                                placeholder=\"Enter title\"\n                                value={this.state.title}\n                                onChange={this.onChange}\n                            />\n                        </div>\n                        { this.showInvalidTitle(this.state.isInvalidTitle) }\n\n                        <div className=\"form-group\">\n                            <label for=\"message\">Message</label>\n                            <textarea\n                                className=\"form-control form-control-lg\"\n                                id=\"message\"\n                                name=\"message\"\n                                value={this.state.message}\n                                onChange={this.onChange}\n                                rows=\"17\"\n                            >\n                            </textarea>\n                        </div>\n                        { this.showInvalidMessage(this.state.isInvalidMessage) }\n\n                        <div className=\"form-group\">\n                            <label for=\"file\">Upload data</label>\n                            <input \n                                id=\"file\"\n                                type=\"file\"\n                                className=\"form-control-file\"\n                                ref={this.fileInput}\n                            />\n                        </div>\n\n                        <button type=\"submit\" className=\"btn btn-primary new-topic-btn\">\n                            Publicate\n                        </button>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default AddTopic;"]},"metadata":{},"sourceType":"module"}